{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/hooks/useIRISWebSocket.ts"],"sourcesContent":["\nimport { useState, useEffect, useRef, useCallback } from \"react\"\n\n// WebSocket connection states\ntype ConnectionState = \"connecting\" | \"connected\" | \"disconnected\" | \"error\"\n\n// Theme type matching backend\ninterface ColorTheme {\n  primary: string\n  glow: string\n  font: string\n  state_colors_enabled?: boolean\n  idle_color?: string\n  listening_color?: string\n  processing_color?: string\n  error_color?: string\n}\n\n// Field values by subnode ID (flat structure)\ninterface FieldValues {\n  [subnodeId: string]: {\n    [fieldId: string]: string | number | boolean\n  }\n}\n\n// Confirmed node in orbit\ninterface ConfirmedNode {\n  id: string\n  label: string\n  icon: string\n  orbit_angle: number\n  values: Record<string, string | number | boolean>\n  category: string\n}\n\n// Full IRIS state from backend\ninterface IRISState {\n  current_category: string | null\n  current_subnode: string | null\n  field_values: FieldValues\n  active_theme: ColorTheme\n  confirmed_nodes: ConfirmedNode[]\n}\n\n// Hook return type\ninterface UseIRISWebSocketReturn {\n  isConnected: boolean\n  connectionState: ConnectionState\n  theme: ColorTheme\n  fieldValues: FieldValues\n  confirmedNodes: ConfirmedNode[]\n  currentCategory: string | null\n  currentSubnode: string | null\n  selectCategory: (category: string) => void\n  selectSubnode: (subnodeId: string | null) => void\n  updateField: (subnodeId: string, fieldId: string, value: string | number | boolean) => void\n  confirmMiniNode: (subnodeId: string, values: Record<string, string | number | boolean>) => void\n  updateTheme: (glowColor?: string, fontColor?: string, stateColors?: { enabled?: boolean; idle?: string; listening?: string; processing?: string; error?: string }) => void\n  requestState: () => void\n  lastError: string | null\n}\n\n// Default theme matching backend defaults\nconst DEFAULT_THEME: ColorTheme = {\n  primary: \"#00ff88\",\n  glow: \"#00ff88\",\n  font: \"#ffffff\",\n}\n\nexport function useIRISWebSocket(\n  url: string = \"ws://localhost:8000/ws/iris\",\n  autoConnect: boolean = true\n): UseIRISWebSocketReturn {\n  // Connection state\n  const [connectionState, setConnectionState] = useState<ConnectionState>(\"disconnected\")\n  const [lastError, setLastError] = useState<string | null>(null)\n\n  // IRIS state from backend\n  const [theme, setTheme] = useState<ColorTheme>(DEFAULT_THEME)\n  const [fieldValues, setFieldValues] = useState<FieldValues>({})\n  const [confirmedNodes, setConfirmedNodes] = useState<ConfirmedNode[]>([])\n  const [currentCategory, setCurrentCategory] = useState<string | null>(null)\n  const [currentSubnode, setCurrentSubnode] = useState<string | null>(null)\n\n  // WebSocket ref\n  const wsRef = useRef<WebSocket | null>(null)\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n  const reconnectAttemptsRef = useRef(0)\n\n  const isConnected = connectionState === \"connected\"\n\n  // Cleanup function\n  const cleanup = useCallback(() => {\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current)\n      reconnectTimeoutRef.current = null\n    }\n    if (wsRef.current) {\n      wsRef.current.close()\n      wsRef.current = null\n    }\n  }, [])\n\n  // Connect to WebSocket\n  const connect = useCallback(() => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      return // Already connected\n    }\n\n    setConnectionState(\"connecting\")\n    setLastError(null)\n\n    try {\n      const ws = new WebSocket(url)\n\n      ws.onopen = () => {\n        console.log(\"[IRIS WebSocket] Connected\")\n        setConnectionState(\"connected\")\n        reconnectAttemptsRef.current = 0\n\n        // Request initial state\n        ws.send(JSON.stringify({ type: \"request_state\", payload: {} }))\n      }\n\n      ws.onmessage = (event) => {\n        try {\n          const message = JSON.parse(event.data)\n          handleMessage(message)\n        } catch (err) {\n          console.error(\"[IRIS WebSocket] Failed to parse message:\", err)\n        }\n      }\n\n      ws.onerror = (error) => {\n        // WebSocket errors don't contain detailed info - just log connection failed\n        console.warn(\"[IRIS WebSocket] Connection failed - backend may be offline\")\n        setConnectionState(\"error\")\n        setLastError(\"Backend offline - running in standalone mode\")\n      }\n\n      ws.onclose = (event) => {\n        console.log(`[IRIS WebSocket] Closed (code: ${event.code})`)\n        setConnectionState(\"disconnected\")\n        wsRef.current = null\n\n        // Auto-reconnect with exponential backoff - longer initial delay for browser mode\n        if (autoConnect && reconnectAttemptsRef.current < 3) {\n          const delay = Math.min(5000 * Math.pow(2, reconnectAttemptsRef.current), 30000)\n          reconnectAttemptsRef.current++\n\n          console.log(`[IRIS WebSocket] Reconnecting in ${delay}ms (attempt ${reconnectAttemptsRef.current}/3)`)\n\n          reconnectTimeoutRef.current = setTimeout(() => {\n            connect()\n          }, delay)\n        }\n      }\n\n      wsRef.current = ws\n    } catch (err) {\n      console.error(\"[IRIS WebSocket] Failed to create connection:\", err)\n      setConnectionState(\"error\")\n      setLastError(\"Failed to create connection\")\n    }\n  }, [url, autoConnect])\n\n  // Handle incoming messages\n  const handleMessage = useCallback((message: any) => {\n    const { type, ...payload } = message\n\n    switch (type) {\n      case \"initial_state\":\n      case \"state_sync\": {\n        const state: IRISState = payload.state\n        if (state.active_theme) setTheme(state.active_theme)\n        if (state.field_values) setFieldValues(state.field_values)\n        if (state.confirmed_nodes) setConfirmedNodes(state.confirmed_nodes)\n        if (state.current_category !== undefined) setCurrentCategory(state.current_category)\n        if (state.current_subnode !== undefined) setCurrentSubnode(state.current_subnode)\n        break\n      }\n\n      case \"category_changed\": {\n        if (payload.category) setCurrentCategory(payload.category)\n        setCurrentSubnode(null)\n        break\n      }\n\n      case \"subnode_changed\": {\n        if (payload.subnode_id !== undefined) setCurrentSubnode(payload.subnode_id)\n        break\n      }\n\n      case \"field_updated\": {\n        // Optimistic update confirmed by server\n        const { subnode_id, field_id, value } = payload\n        if (subnode_id && field_id !== undefined) {\n          setFieldValues((prev) => ({\n            ...prev,\n            [subnode_id]: {\n              ...prev[subnode_id],\n              [field_id]: value,\n            },\n          }))\n        }\n        break\n      }\n\n      case \"validation_error\": {\n        console.error(\"[IRIS WebSocket] Validation error:\", payload.error, payload.field_id)\n        setLastError(payload.error)\n        break\n      }\n\n      case \"mini_node_confirmed\": {\n        // Server confirmed, state will be synced via state_sync\n        break\n      }\n\n      case \"theme_updated\": {\n        if (payload.glow || payload.font || payload.state_colors_enabled !== undefined) {\n          setTheme((prev) => ({\n            ...prev,\n            ...(payload.glow && { glow: payload.glow, primary: payload.glow }),\n            ...(payload.font && { font: payload.font }),\n            ...(payload.state_colors_enabled !== undefined && { state_colors_enabled: payload.state_colors_enabled }),\n            ...(payload.idle_color && { idle_color: payload.idle_color }),\n            ...(payload.listening_color && { listening_color: payload.listening_color }),\n            ...(payload.processing_color && { processing_color: payload.processing_color }),\n            ...(payload.error_color && { error_color: payload.error_color }),\n          }))\n        }\n        break\n      }\n\n      case \"pong\": {\n        // Keep-alive response, no action needed\n        break\n      }\n\n      default:\n        console.log(\"[IRIS WebSocket] Unknown message type:\", type, payload)\n    }\n  }, [])\n\n  // Send message helper\n  const sendMessage = useCallback((type: string, payload: any = {}) => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify({ type, payload }))\n      return true\n    }\n    console.warn(\"[IRIS WebSocket] Not connected, message dropped:\", type)\n    return false\n  }, [])\n\n  // Action methods\n  const selectCategory = useCallback((category: string) => {\n    sendMessage(\"select_category\", { category })\n  }, [sendMessage])\n\n  const selectSubnode = useCallback((subnodeId: string | null) => {\n    if (subnodeId) {\n      sendMessage(\"select_subnode\", { subnode_id: subnodeId })\n    } else {\n      // Deselect - just update local state for now\n      setCurrentSubnode(null)\n    }\n  }, [sendMessage])\n\n  const updateField = useCallback((subnodeId: string, fieldId: string, value: string | number | boolean) => {\n    // Optimistic local update\n    setFieldValues((prev) => ({\n      ...prev,\n      [subnodeId]: {\n        ...prev[subnodeId],\n        [fieldId]: value,\n      },\n    }))\n\n    // Send to server\n    sendMessage(\"field_update\", { subnode_id: subnodeId, field_id: fieldId, value })\n  }, [sendMessage])\n\n  const confirmMiniNode = useCallback((subnodeId: string, values: Record<string, string | number | boolean>) => {\n    sendMessage(\"confirm_mini_node\", { subnode_id: subnodeId, values })\n  }, [sendMessage])\n\n  const updateTheme = useCallback((glowColor?: string, fontColor?: string, stateColors?: { enabled?: boolean; idle?: string; listening?: string; processing?: string; error?: string }) => {\n    // Optimistic local update\n    setTheme((prev) => ({\n      ...prev,\n      ...(glowColor && { glow: glowColor, primary: glowColor }),\n      ...(fontColor && { font: fontColor }),\n      ...(stateColors?.enabled !== undefined && { state_colors_enabled: stateColors.enabled }),\n      ...(stateColors?.idle && { idle_color: stateColors.idle }),\n      ...(stateColors?.listening && { listening_color: stateColors.listening }),\n      ...(stateColors?.processing && { processing_color: stateColors.processing }),\n      ...(stateColors?.error && { error_color: stateColors.error }),\n    }))\n\n    // Send to server\n    sendMessage(\"update_theme\", { glow_color: glowColor, font_color: fontColor, state_colors: stateColors })\n  }, [sendMessage])\n\n  const requestState = useCallback(() => {\n    sendMessage(\"request_state\", {})\n  }, [sendMessage])\n\n  // Initialize connection\n  useEffect(() => {\n    if (autoConnect) {\n      connect()\n    }\n\n    return cleanup\n  }, [autoConnect, connect, cleanup])\n\n  // Keep-alive ping\n  useEffect(() => {\n    if (!isConnected) return\n\n    const interval = setInterval(() => {\n      sendMessage(\"ping\", {})\n    }, 30000) // Ping every 30 seconds\n\n    return () => clearInterval(interval)\n  }, [isConnected, sendMessage])\n\n  return {\n    isConnected,\n    connectionState,\n    theme,\n    fieldValues,\n    confirmedNodes,\n    currentCategory,\n    currentSubnode,\n    selectCategory,\n    selectSubnode,\n    updateField,\n    confirmMiniNode,\n    updateTheme,\n    requestState,\n    lastError,\n  }\n}\n"],"names":[],"mappings":";;;;AACA;;;AA6DA,0CAA0C;AAC1C,MAAM,gBAA4B;IAChC,SAAS;IACT,MAAM;IACN,MAAM;AACR;AAEO,SAAS,iBACd,MAAc,6BAA6B,EAC3C,cAAuB,IAAI;;IAE3B,mBAAmB;IACnB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAkB;IACxE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAgB;IAE1D,0BAA0B;IAC1B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAa;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAc,CAAC;IAC7D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAkB,EAAE;IACxE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAgB;IACtE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAgB;IAEpE,gBAAgB;IAChB,MAAM,QAAQ,IAAA,uKAAM,EAAmB;IACvC,MAAM,sBAAsB,IAAA,uKAAM,EAAwB;IAC1D,MAAM,uBAAuB,IAAA,uKAAM,EAAC;IAEpC,MAAM,cAAc,oBAAoB;IAExC,mBAAmB;IACnB,MAAM,UAAU,IAAA,4KAAW;iDAAC;YAC1B,IAAI,oBAAoB,OAAO,EAAE;gBAC/B,aAAa,oBAAoB,OAAO;gBACxC,oBAAoB,OAAO,GAAG;YAChC;YACA,IAAI,MAAM,OAAO,EAAE;gBACjB,MAAM,OAAO,CAAC,KAAK;gBACnB,MAAM,OAAO,GAAG;YAClB;QACF;gDAAG,EAAE;IAEL,uBAAuB;IACvB,MAAM,UAAU,IAAA,4KAAW;iDAAC;YAC1B,IAAI,MAAM,OAAO,EAAE,eAAe,UAAU,IAAI,EAAE;gBAChD,QAAO,oBAAoB;YAC7B;YAEA,mBAAmB;YACnB,aAAa;YAEb,IAAI;gBACF,MAAM,KAAK,IAAI,UAAU;gBAEzB,GAAG,MAAM;6DAAG;wBACV,QAAQ,GAAG,CAAC;wBACZ,mBAAmB;wBACnB,qBAAqB,OAAO,GAAG;wBAE/B,wBAAwB;wBACxB,GAAG,IAAI,CAAC,KAAK,SAAS,CAAC;4BAAE,MAAM;4BAAiB,SAAS,CAAC;wBAAE;oBAC9D;;gBAEA,GAAG,SAAS;6DAAG,CAAC;wBACd,IAAI;4BACF,MAAM,UAAU,KAAK,KAAK,CAAC,MAAM,IAAI;4BACrC,cAAc;wBAChB,EAAE,OAAO,KAAK;4BACZ,QAAQ,KAAK,CAAC,6CAA6C;wBAC7D;oBACF;;gBAEA,GAAG,OAAO;6DAAG,CAAC;wBACZ,4EAA4E;wBAC5E,QAAQ,IAAI,CAAC;wBACb,mBAAmB;wBACnB,aAAa;oBACf;;gBAEA,GAAG,OAAO;6DAAG,CAAC;wBACZ,QAAQ,GAAG,CAAC,CAAC,+BAA+B,EAAE,MAAM,IAAI,CAAC,CAAC,CAAC;wBAC3D,mBAAmB;wBACnB,MAAM,OAAO,GAAG;wBAEhB,kFAAkF;wBAClF,IAAI,eAAe,qBAAqB,OAAO,GAAG,GAAG;4BACnD,MAAM,QAAQ,KAAK,GAAG,CAAC,OAAO,KAAK,GAAG,CAAC,GAAG,qBAAqB,OAAO,GAAG;4BACzE,qBAAqB,OAAO;4BAE5B,QAAQ,GAAG,CAAC,CAAC,iCAAiC,EAAE,MAAM,YAAY,EAAE,qBAAqB,OAAO,CAAC,GAAG,CAAC;4BAErG,oBAAoB,OAAO,GAAG;yEAAW;oCACvC;gCACF;wEAAG;wBACL;oBACF;;gBAEA,MAAM,OAAO,GAAG;YAClB,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,iDAAiD;gBAC/D,mBAAmB;gBACnB,aAAa;YACf;QACF;gDAAG;QAAC;QAAK;KAAY;IAErB,2BAA2B;IAC3B,MAAM,gBAAgB,IAAA,4KAAW;uDAAC,CAAC;YACjC,MAAM,EAAE,IAAI,EAAE,GAAG,SAAS,GAAG;YAE7B,OAAQ;gBACN,KAAK;gBACL,KAAK;oBAAc;wBACjB,MAAM,QAAmB,QAAQ,KAAK;wBACtC,IAAI,MAAM,YAAY,EAAE,SAAS,MAAM,YAAY;wBACnD,IAAI,MAAM,YAAY,EAAE,eAAe,MAAM,YAAY;wBACzD,IAAI,MAAM,eAAe,EAAE,kBAAkB,MAAM,eAAe;wBAClE,IAAI,MAAM,gBAAgB,KAAK,WAAW,mBAAmB,MAAM,gBAAgB;wBACnF,IAAI,MAAM,eAAe,KAAK,WAAW,kBAAkB,MAAM,eAAe;wBAChF;oBACF;gBAEA,KAAK;oBAAoB;wBACvB,IAAI,QAAQ,QAAQ,EAAE,mBAAmB,QAAQ,QAAQ;wBACzD,kBAAkB;wBAClB;oBACF;gBAEA,KAAK;oBAAmB;wBACtB,IAAI,QAAQ,UAAU,KAAK,WAAW,kBAAkB,QAAQ,UAAU;wBAC1E;oBACF;gBAEA,KAAK;oBAAiB;wBACpB,wCAAwC;wBACxC,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG;wBACxC,IAAI,cAAc,aAAa,WAAW;4BACxC;+EAAe,CAAC,OAAS,CAAC;wCACxB,GAAG,IAAI;wCACP,CAAC,WAAW,EAAE;4CACZ,GAAG,IAAI,CAAC,WAAW;4CACnB,CAAC,SAAS,EAAE;wCACd;oCACF,CAAC;;wBACH;wBACA;oBACF;gBAEA,KAAK;oBAAoB;wBACvB,QAAQ,KAAK,CAAC,sCAAsC,QAAQ,KAAK,EAAE,QAAQ,QAAQ;wBACnF,aAAa,QAAQ,KAAK;wBAC1B;oBACF;gBAEA,KAAK;oBAAuB;wBAE1B;oBACF;gBAEA,KAAK;oBAAiB;wBACpB,IAAI,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,QAAQ,oBAAoB,KAAK,WAAW;4BAC9E;+EAAS,CAAC,OAAS,CAAC;wCAClB,GAAG,IAAI;wCACP,GAAI,QAAQ,IAAI,IAAI;4CAAE,MAAM,QAAQ,IAAI;4CAAE,SAAS,QAAQ,IAAI;wCAAC,CAAC;wCACjE,GAAI,QAAQ,IAAI,IAAI;4CAAE,MAAM,QAAQ,IAAI;wCAAC,CAAC;wCAC1C,GAAI,QAAQ,oBAAoB,KAAK,aAAa;4CAAE,sBAAsB,QAAQ,oBAAoB;wCAAC,CAAC;wCACxG,GAAI,QAAQ,UAAU,IAAI;4CAAE,YAAY,QAAQ,UAAU;wCAAC,CAAC;wCAC5D,GAAI,QAAQ,eAAe,IAAI;4CAAE,iBAAiB,QAAQ,eAAe;wCAAC,CAAC;wCAC3E,GAAI,QAAQ,gBAAgB,IAAI;4CAAE,kBAAkB,QAAQ,gBAAgB;wCAAC,CAAC;wCAC9E,GAAI,QAAQ,WAAW,IAAI;4CAAE,aAAa,QAAQ,WAAW;wCAAC,CAAC;oCACjE,CAAC;;wBACH;wBACA;oBACF;gBAEA,KAAK;oBAAQ;wBAEX;oBACF;gBAEA;oBACE,QAAQ,GAAG,CAAC,0CAA0C,MAAM;YAChE;QACF;sDAAG,EAAE;IAEL,sBAAsB;IACtB,MAAM,cAAc,IAAA,4KAAW;qDAAC,CAAC,MAAc,UAAe,CAAC,CAAC;YAC9D,IAAI,MAAM,OAAO,EAAE,eAAe,UAAU,IAAI,EAAE;gBAChD,MAAM,OAAO,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;oBAAE;oBAAM;gBAAQ;gBAClD,OAAO;YACT;YACA,QAAQ,IAAI,CAAC,oDAAoD;YACjE,OAAO;QACT;oDAAG,EAAE;IAEL,iBAAiB;IACjB,MAAM,iBAAiB,IAAA,4KAAW;wDAAC,CAAC;YAClC,YAAY,mBAAmB;gBAAE;YAAS;QAC5C;uDAAG;QAAC;KAAY;IAEhB,MAAM,gBAAgB,IAAA,4KAAW;uDAAC,CAAC;YACjC,IAAI,WAAW;gBACb,YAAY,kBAAkB;oBAAE,YAAY;gBAAU;YACxD,OAAO;gBACL,6CAA6C;gBAC7C,kBAAkB;YACpB;QACF;sDAAG;QAAC;KAAY;IAEhB,MAAM,cAAc,IAAA,4KAAW;qDAAC,CAAC,WAAmB,SAAiB;YACnE,0BAA0B;YAC1B;6DAAe,CAAC,OAAS,CAAC;wBACxB,GAAG,IAAI;wBACP,CAAC,UAAU,EAAE;4BACX,GAAG,IAAI,CAAC,UAAU;4BAClB,CAAC,QAAQ,EAAE;wBACb;oBACF,CAAC;;YAED,iBAAiB;YACjB,YAAY,gBAAgB;gBAAE,YAAY;gBAAW,UAAU;gBAAS;YAAM;QAChF;oDAAG;QAAC;KAAY;IAEhB,MAAM,kBAAkB,IAAA,4KAAW;yDAAC,CAAC,WAAmB;YACtD,YAAY,qBAAqB;gBAAE,YAAY;gBAAW;YAAO;QACnE;wDAAG;QAAC;KAAY;IAEhB,MAAM,cAAc,IAAA,4KAAW;qDAAC,CAAC,WAAoB,WAAoB;YACvE,0BAA0B;YAC1B;6DAAS,CAAC,OAAS,CAAC;wBAClB,GAAG,IAAI;wBACP,GAAI,aAAa;4BAAE,MAAM;4BAAW,SAAS;wBAAU,CAAC;wBACxD,GAAI,aAAa;4BAAE,MAAM;wBAAU,CAAC;wBACpC,GAAI,aAAa,YAAY,aAAa;4BAAE,sBAAsB,YAAY,OAAO;wBAAC,CAAC;wBACvF,GAAI,aAAa,QAAQ;4BAAE,YAAY,YAAY,IAAI;wBAAC,CAAC;wBACzD,GAAI,aAAa,aAAa;4BAAE,iBAAiB,YAAY,SAAS;wBAAC,CAAC;wBACxE,GAAI,aAAa,cAAc;4BAAE,kBAAkB,YAAY,UAAU;wBAAC,CAAC;wBAC3E,GAAI,aAAa,SAAS;4BAAE,aAAa,YAAY,KAAK;wBAAC,CAAC;oBAC9D,CAAC;;YAED,iBAAiB;YACjB,YAAY,gBAAgB;gBAAE,YAAY;gBAAW,YAAY;gBAAW,cAAc;YAAY;QACxG;oDAAG;QAAC;KAAY;IAEhB,MAAM,eAAe,IAAA,4KAAW;sDAAC;YAC/B,YAAY,iBAAiB,CAAC;QAChC;qDAAG;QAAC;KAAY;IAEhB,wBAAwB;IACxB,IAAA,0KAAS;sCAAC;YACR,IAAI,aAAa;gBACf;YACF;YAEA,OAAO;QACT;qCAAG;QAAC;QAAa;QAAS;KAAQ;IAElC,kBAAkB;IAClB,IAAA,0KAAS;sCAAC;YACR,IAAI,CAAC,aAAa;YAElB,MAAM,WAAW;uDAAY;oBAC3B,YAAY,QAAQ,CAAC;gBACvB;sDAAG,OAAO,wBAAwB;;YAElC;8CAAO,IAAM,cAAc;;QAC7B;qCAAG;QAAC;QAAa;KAAY;IAE7B,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GAnRgB"}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/fields/FieldWrapper.tsx"],"sourcesContent":["\"use client\"\n\nimport { ReactNode } from \"react\"\n\ninterface FieldWrapperProps {\n  label: string\n  description?: string\n  error?: string\n  children: ReactNode\n  compact?: boolean\n}\n\nexport function FieldWrapper({\n  label,\n  description,\n  error,\n  children,\n  compact = false,\n}: FieldWrapperProps) {\n  if (compact) {\n    return (\n      <div className=\"flex items-center justify-between gap-3\">\n        <div className=\"flex-1 min-w-0\">\n          <label className=\"text-[11px] font-medium uppercase tracking-wider text-white/60\">\n            {label}\n          </label>\n          {description && (\n            <p className=\"text-[10px] text-white/40 truncate\">{description}</p>\n          )}\n        </div>\n        <div className=\"flex-shrink-0\">{children}</div>\n        {error && (\n          <span className=\"text-[10px] text-red-400 absolute -bottom-4 right-0\">\n            {error}\n          </span>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-2 relative\">\n      <label className=\"text-[11px] font-medium uppercase tracking-wider text-white/60\">\n        {label}\n      </label>\n      {description && (\n        <p className=\"text-[10px] text-white/40 -mt-1\">{description}</p>\n      )}\n      {children}\n      {error && (\n        <span className=\"text-[10px] text-red-400\">{error}</span>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAYO,SAAS,aAAa,EAC3B,KAAK,EACL,WAAW,EACX,KAAK,EACL,QAAQ,EACR,UAAU,KAAK,EACG;IAClB,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAM,WAAU;sCACd;;;;;;wBAEF,6BACC,6LAAC;4BAAE,WAAU;sCAAsC;;;;;;;;;;;;8BAGvD,6LAAC;oBAAI,WAAU;8BAAiB;;;;;;gBAC/B,uBACC,6LAAC;oBAAK,WAAU;8BACb;;;;;;;;;;;;IAKX;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAM,WAAU;0BACd;;;;;;YAEF,6BACC,6LAAC;gBAAE,WAAU;0BAAmC;;;;;;YAEjD;YACA,uBACC,6LAAC;gBAAK,WAAU;0BAA4B;;;;;;;;;;;;AAIpD;KA1CgB"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/fields/TextField.tsx"],"sourcesContent":["\"use client\"\n\nimport { FieldWrapper } from \"./FieldWrapper\"\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\n\ninterface TextFieldProps {\n  label: string\n  value: string\n  placeholder?: string\n  onChange: (value: string) => void\n  description?: string\n  error?: string\n}\n\nexport function TextField({\n  label,\n  value,\n  placeholder,\n  onChange,\n  description,\n  error,\n}: TextFieldProps) {\n  const { getHSLString } = useBrandColor()\n  const glowColor = getHSLString()\n\n  return (\n    <FieldWrapper label={label} description={description} error={error}>\n      <input\n        type=\"text\"\n        value={value || \"\"}\n        placeholder={placeholder}\n        onChange={(e) => onChange(e.target.value)}\n        className=\"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-sm text-white/90 placeholder:text-white/30 focus:outline-none transition-colors\"\n        style={{ \n          borderColor: value ? `${glowColor}50` : undefined,\n        }}\n      />\n    </FieldWrapper>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAcO,SAAS,UAAU,EACxB,KAAK,EACL,KAAK,EACL,WAAW,EACX,QAAQ,EACR,WAAW,EACX,KAAK,EACU;;IACf,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,kJAAa;IACtC,MAAM,YAAY;IAElB,qBACE,6LAAC,wJAAY;QAAC,OAAO;QAAO,aAAa;QAAa,OAAO;kBAC3D,cAAA,6LAAC;YACC,MAAK;YACL,OAAO,SAAS;YAChB,aAAa;YACb,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;YACxC,WAAU;YACV,OAAO;gBACL,aAAa,QAAQ,GAAG,UAAU,EAAE,CAAC,GAAG;YAC1C;;;;;;;;;;;AAIR;GAzBgB;;QAQW,kJAAa;;;KARxB"}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/fields/SliderField.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useCallback, useEffect } from \"react\"\nimport { FieldWrapper } from \"./FieldWrapper\"\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\n\ninterface SliderFieldProps {\n  label: string\n  value: number\n  min: number\n  max: number\n  step?: number\n  unit?: string\n  onChange: (value: number) => void\n  description?: string\n  showValue?: \"tooltip\" | \"beside\" | \"none\"\n}\n\nexport function SliderField({\n  label,\n  value,\n  min,\n  max,\n  step = 1,\n  unit = \"\",\n  onChange,\n  description,\n  showValue = \"beside\",\n}: SliderFieldProps) {\n  const [isDragging, setIsDragging] = useState(false)\n  const [showTooltip, setShowTooltip] = useState(false)\n  const trackRef = useRef<HTMLDivElement>(null)\n  const { getHSLString } = useBrandColor()\n  const glowColor = getHSLString()\n\n  const currentValue = value ?? min\n  const percentage = ((currentValue - min) / (max - min)) * 100\n\n  const handleInteraction = useCallback(\n    (clientX: number, isFineControl: boolean) => {\n      if (!trackRef.current) return\n\n      const rect = trackRef.current.getBoundingClientRect()\n      const rawPercentage = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width))\n      const rawValue = min + rawPercentage * (max - min)\n\n      // Apply step and fine control\n      const actualStep = isFineControl ? step / 10 : step\n      const steppedValue = Math.round(rawValue / actualStep) * actualStep\n      const clampedValue = Math.max(min, Math.min(max, steppedValue))\n\n      onChange(Number(clampedValue.toFixed(2)))\n    },\n    [min, max, step, onChange]\n  )\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation()\n    setIsDragging(true)\n    handleInteraction(e.clientX, e.shiftKey)\n  }\n\n  const handleMouseMove = useCallback(\n    (e: MouseEvent) => {\n      if (isDragging) {\n        handleInteraction(e.clientX, e.shiftKey)\n      }\n    },\n    [isDragging, handleInteraction]\n  )\n\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false)\n  }, [])\n\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener(\"mousemove\", handleMouseMove)\n      window.addEventListener(\"mouseup\", handleMouseUp)\n      return () => {\n        window.removeEventListener(\"mousemove\", handleMouseMove)\n        window.removeEventListener(\"mouseup\", handleMouseUp)\n      }\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp])\n\n  const formattedValue = `${Math.round(currentValue)}${unit}`\n\n  return (\n    <FieldWrapper label={label} description={description}>\n      <div className=\"flex items-center gap-3\">\n        <div\n          ref={trackRef}\n          className=\"relative flex-1 h-1 bg-white/10 rounded-full cursor-pointer\"\n          onMouseDown={handleMouseDown}\n          onMouseEnter={() => setShowTooltip(true)}\n          onMouseLeave={() => !isDragging && setShowTooltip(false)}\n        >\n          {/* Fill */}\n          <div\n            className=\"absolute left-0 top-0 h-full rounded-full transition-all duration-75\"\n            style={{\n              width: `${percentage}%`,\n              background: glowColor,\n              boxShadow: `0 0 8px ${glowColor}`,\n            }}\n          />\n\n          {/* Thumb */}\n          <div\n            className=\"absolute top-1/2 w-4 h-4 bg-white rounded-full shadow-lg transform -translate-y-1/2 -translate-x-1/2 transition-transform hover:scale-110\"\n            style={{ left: `${percentage}%` }}\n          />\n\n          {/* Tooltip */}\n          {showTooltip && showValue === \"tooltip\" && (\n            <div\n              className=\"absolute -top-8 px-2 py-1 bg-white/10 rounded text-xs text-white transform -translate-x-1/2\"\n              style={{ left: `${percentage}%` }}\n            >\n              {formattedValue}\n            </div>\n          )}\n        </div>\n\n        {showValue === \"beside\" && (\n          <span className=\"text-xs text-white/60 w-12 text-right tabular-nums\">\n            {formattedValue}\n          </span>\n        )}\n      </div>\n    </FieldWrapper>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAkBO,SAAS,YAAY,EAC1B,KAAK,EACL,KAAK,EACL,GAAG,EACH,GAAG,EACH,OAAO,CAAC,EACR,OAAO,EAAE,EACT,QAAQ,EACR,WAAW,EACX,YAAY,QAAQ,EACH;;IACjB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,WAAW,IAAA,uKAAM,EAAiB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,kJAAa;IACtC,MAAM,YAAY;IAElB,MAAM,eAAe,SAAS;IAC9B,MAAM,aAAa,AAAC,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,GAAG,IAAK;IAE1D,MAAM,oBAAoB,IAAA,4KAAW;sDACnC,CAAC,SAAiB;YAChB,IAAI,CAAC,SAAS,OAAO,EAAE;YAEvB,MAAM,OAAO,SAAS,OAAO,CAAC,qBAAqB;YACnD,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,UAAU,KAAK,IAAI,IAAI,KAAK,KAAK;YAChF,MAAM,WAAW,MAAM,gBAAgB,CAAC,MAAM,GAAG;YAEjD,8BAA8B;YAC9B,MAAM,aAAa,gBAAgB,OAAO,KAAK;YAC/C,MAAM,eAAe,KAAK,KAAK,CAAC,WAAW,cAAc;YACzD,MAAM,eAAe,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;YAEjD,SAAS,OAAO,aAAa,OAAO,CAAC;QACvC;qDACA;QAAC;QAAK;QAAK;QAAM;KAAS;IAG5B,MAAM,kBAAkB,CAAC;QACvB,EAAE,eAAe;QACjB,cAAc;QACd,kBAAkB,EAAE,OAAO,EAAE,EAAE,QAAQ;IACzC;IAEA,MAAM,kBAAkB,IAAA,4KAAW;oDACjC,CAAC;YACC,IAAI,YAAY;gBACd,kBAAkB,EAAE,OAAO,EAAE,EAAE,QAAQ;YACzC;QACF;mDACA;QAAC;QAAY;KAAkB;IAGjC,MAAM,gBAAgB,IAAA,4KAAW;kDAAC;YAChC,cAAc;QAChB;iDAAG,EAAE;IAEL,IAAA,0KAAS;iCAAC;YACR,IAAI,YAAY;gBACd,OAAO,gBAAgB,CAAC,aAAa;gBACrC,OAAO,gBAAgB,CAAC,WAAW;gBACnC;6CAAO;wBACL,OAAO,mBAAmB,CAAC,aAAa;wBACxC,OAAO,mBAAmB,CAAC,WAAW;oBACxC;;YACF;QACF;gCAAG;QAAC;QAAY;QAAiB;KAAc;IAE/C,MAAM,iBAAiB,GAAG,KAAK,KAAK,CAAC,gBAAgB,MAAM;IAE3D,qBACE,6LAAC,wJAAY;QAAC,OAAO;QAAO,aAAa;kBACvC,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,KAAK;oBACL,WAAU;oBACV,aAAa;oBACb,cAAc,IAAM,eAAe;oBACnC,cAAc,IAAM,CAAC,cAAc,eAAe;;sCAGlD,6LAAC;4BACC,WAAU;4BACV,OAAO;gCACL,OAAO,GAAG,WAAW,CAAC,CAAC;gCACvB,YAAY;gCACZ,WAAW,CAAC,QAAQ,EAAE,WAAW;4BACnC;;;;;;sCAIF,6LAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,MAAM,GAAG,WAAW,CAAC,CAAC;4BAAC;;;;;;wBAIjC,eAAe,cAAc,2BAC5B,6LAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,MAAM,GAAG,WAAW,CAAC,CAAC;4BAAC;sCAE/B;;;;;;;;;;;;gBAKN,cAAc,0BACb,6LAAC;oBAAK,WAAU;8BACb;;;;;;;;;;;;;;;;;AAMb;GAnHgB;;QAcW,kJAAa;;;KAdxB"}},
    {"offset": {"line": 711, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/fields/DropdownField.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { ChevronDown } from \"lucide-react\"\nimport { FieldWrapper } from \"./FieldWrapper\"\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\n\ninterface DropdownOption {\n  label: string\n  value: string\n  downloaded?: boolean\n}\n\ninterface DropdownFieldProps {\n  label: string\n  value: string\n  options?: string[] | DropdownOption[]\n  loadOptions?: () => Promise<DropdownOption[]>\n  onChange: (value: string) => void\n  placeholder?: string\n  description?: string\n  searchable?: boolean\n}\n\nexport function DropdownField({\n  label,\n  value,\n  options,\n  loadOptions,\n  onChange,\n  placeholder = \"Select...\",\n  description,\n  searchable = false,\n}: DropdownFieldProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [loadedOptions, setLoadedOptions] = useState<DropdownOption[] | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const containerRef = useRef<HTMLDivElement>(null)\n  const { getHSLString } = useBrandColor()\n  const glowColor = getHSLString()\n\n  // Load async options on first open\n  useEffect(() => {\n    if (isOpen && loadOptions && !loadedOptions && !isLoading) {\n      setIsLoading(true)\n      loadOptions()\n        .then((opts) => {\n          setLoadedOptions(opts)\n          setIsLoading(false)\n        })\n        .catch(() => setIsLoading(false))\n    }\n  }, [isOpen, loadOptions, loadedOptions, isLoading])\n\n  // Close on outside click\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  const allOptions: DropdownOption[] = loadedOptions ||\n    (options\n      ? options.map((opt) =>\n          typeof opt === \"string\" ? { label: opt, value: opt } : opt\n        )\n      : [])\n\n  const filteredOptions = searchable && searchQuery\n    ? allOptions.filter((opt) =>\n        opt.label.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n    : allOptions\n\n  const selectedOption = allOptions.find((opt) => opt.value === value)\n  const displayValue = selectedOption?.label || value || placeholder\n\n  return (\n    <FieldWrapper label={label} description={description}>\n      <div ref={containerRef} className=\"relative\">\n        {/* Trigger */}\n        <button\n          type=\"button\"\n          onClick={(e) => {\n            e.stopPropagation()\n            setIsOpen(!isOpen)\n          }}\n          className=\"w-full flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-sm text-white/90 hover:border-white/20 focus:outline-none focus:border-white/30 transition-colors\"\n        >\n          <span className=\"truncate\">{displayValue}</span>\n          <ChevronDown\n            className={`w-4 h-4 text-white/40 transition-transform ${isOpen ? \"rotate-180\" : \"\"}`}\n          />\n        </button>\n\n        {/* Menu */}\n        {isOpen && (\n          <div className=\"absolute z-50 mt-1 w-full max-h-48 overflow-auto rounded-lg bg-[#1c1f24] border border-white/10 shadow-xl\">\n            {/* Search input for searchable dropdowns */}\n            {searchable && (\n              <div className=\"sticky top-0 p-2 bg-[#1c1f24] border-b border-white/10\">\n                <input\n                  type=\"text\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder=\"Search...\"\n                  className=\"w-full px-2 py-1 text-xs bg-white/5 rounded border border-white/10 text-white/90 placeholder:text-white/30 focus:outline-none focus:border-white/30\"\n                  onClick={(e) => e.stopPropagation()}\n                />\n              </div>\n            )}\n\n            {isLoading ? (\n              <div className=\"px-3 py-2 text-sm text-white/40\">Loading...</div>\n            ) : (\n              <div className=\"py-1\">\n                {filteredOptions.map((option) => (\n                  <button\n                    key={option.value}\n                    type=\"button\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onChange(option.value)\n                      setIsOpen(false)\n                    }}\n                    className={`w-full px-3 py-2 text-left text-sm transition-colors ${\n                      option.value === value\n                        ? \"text-white\"\n                        : \"text-white/70 hover:bg-white/5\"\n                    }`}\n                    style={{ backgroundColor: option.value === value ? `${glowColor}30` : 'transparent' }}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <span>{option.label}</span>\n                      {option.downloaded !== undefined && (\n                        <span\n                          className={`text-xs ${\n                            option.downloaded ? \"text-green-400\" : \"text-amber-400\"\n                          }`}\n                        >\n                          {option.downloaded ? \"Downloaded\" : \"Download\"}\n                        </span>\n                      )}\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </FieldWrapper>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 925, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/fields/ToggleField.tsx"],"sourcesContent":["\"use client\"\n\nimport { FieldWrapper } from \"./FieldWrapper\"\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\n\ninterface ToggleFieldProps {\n  label: string\n  value: boolean\n  onChange: (value: boolean) => void\n  description?: string\n}\n\nexport function ToggleField({\n  label,\n  value,\n  onChange,\n  description,\n}: ToggleFieldProps) {\n  const { getHSLString } = useBrandColor()\n  const glowColor = getHSLString()\n  return (\n    <FieldWrapper label={label} description={description}>\n      <button\n        type=\"button\"\n        role=\"switch\"\n        aria-checked={value}\n        onClick={(e) => {\n          e.stopPropagation()\n          onChange(!value)\n        }}\n        className=\"relative w-12 h-6 rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-white/20\"\n        style={{ backgroundColor: value ? glowColor : 'rgba(255, 255, 255, 0.1)' }}\n      >\n        <span\n          className={`absolute top-0.5 w-5 h-5 rounded-full bg-white shadow-md transition-all duration-200 ${\n            value ? \"left-6 translate-x-0\" : \"left-0.5\"\n          }`}\n        />\n      </button>\n    </FieldWrapper>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYO,SAAS,YAAY,EAC1B,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACM;;IACjB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,kJAAa;IACtC,MAAM,YAAY;IAClB,qBACE,6LAAC,wJAAY;QAAC,OAAO;QAAO,aAAa;kBACvC,cAAA,6LAAC;YACC,MAAK;YACL,MAAK;YACL,gBAAc;YACd,SAAS,CAAC;gBACR,EAAE,eAAe;gBACjB,SAAS,CAAC;YACZ;YACA,WAAU;YACV,OAAO;gBAAE,iBAAiB,QAAQ,YAAY;YAA2B;sBAEzE,cAAA,6LAAC;gBACC,WAAW,CAAC,qFAAqF,EAC/F,QAAQ,yBAAyB,YACjC;;;;;;;;;;;;;;;;AAKZ;GA7BgB;;QAMW,kJAAa;;;KANxB"}},
    {"offset": {"line": 989, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/fields/ColorField.tsx"],"sourcesContent":["\"use client\"\n\nimport { FieldWrapper } from \"./FieldWrapper\"\n\ninterface ColorFieldProps {\n  label: string\n  value: string\n  onChange: (value: string) => void\n  description?: string\n}\n\nexport function ColorField({\n  label,\n  value,\n  onChange,\n  description,\n}: ColorFieldProps) {\n  const currentValue = value || \"#00ff88\"\n\n  const isValidHex = (hex: string) => /^#[0-9A-Fa-f]{6}$/.test(hex)\n\n  const handleTextChange = (input: string) => {\n    let hex = input.trim()\n    if (!hex.startsWith(\"#\")) {\n      hex = \"#\" + hex\n    }\n    if (isValidHex(hex)) {\n      onChange(hex.toLowerCase())\n    }\n  }\n\n  return (\n    <FieldWrapper label={label} description={description}>\n      <div className=\"flex items-center gap-3\">\n        <div className=\"relative\">\n          <input\n            type=\"color\"\n            value={currentValue}\n            onChange={(e) => onChange(e.target.value)}\n            onClick={(e) => e.stopPropagation()}\n            className=\"w-10 h-8 rounded bg-transparent border border-white/20 cursor-pointer\"\n            style={{ padding: 0 }}\n          />\n          <div\n            className=\"absolute inset-0 rounded pointer-events-none border border-white/10\"\n            style={{ background: currentValue }}\n          />\n        </div>\n        <input\n          type=\"text\"\n          value={currentValue}\n          onChange={(e) => handleTextChange(e.target.value)}\n          onClick={(e) => e.stopPropagation()}\n          className=\"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-sm text-white/90 font-mono uppercase focus:outline-none focus:border-white/30 transition-colors\"\n          maxLength={7}\n        />\n      </div>\n    </FieldWrapper>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWO,SAAS,WAAW,EACzB,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACK;IAChB,MAAM,eAAe,SAAS;IAE9B,MAAM,aAAa,CAAC,MAAgB,oBAAoB,IAAI,CAAC;IAE7D,MAAM,mBAAmB,CAAC;QACxB,IAAI,MAAM,MAAM,IAAI;QACpB,IAAI,CAAC,IAAI,UAAU,CAAC,MAAM;YACxB,MAAM,MAAM;QACd;QACA,IAAI,WAAW,MAAM;YACnB,SAAS,IAAI,WAAW;QAC1B;IACF;IAEA,qBACE,6LAAC,wJAAY;QAAC,OAAO;QAAO,aAAa;kBACvC,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,SAAS,CAAC,IAAM,EAAE,eAAe;4BACjC,WAAU;4BACV,OAAO;gCAAE,SAAS;4BAAE;;;;;;sCAEtB,6LAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,YAAY;4BAAa;;;;;;;;;;;;8BAGtC,6LAAC;oBACC,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;oBAChD,SAAS,CAAC,IAAM,EAAE,eAAe;oBACjC,WAAU;oBACV,WAAW;;;;;;;;;;;;;;;;;AAKrB;KAhDgB"}},
    {"offset": {"line": 1083, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/mini-node-card.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport * as LucideIcons from \"lucide-react\"\nimport type { MiniNode, FieldConfig } from \"@/types/navigation\"\nimport { TextField } from \"./fields/TextField\"\nimport { SliderField } from \"./fields/SliderField\"\nimport { DropdownField } from \"./fields/DropdownField\"\nimport { ToggleField } from \"./fields/ToggleField\"\nimport { ColorField } from \"./fields/ColorField\"\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\n\ninterface MiniNodeCardProps {\n  miniNode: MiniNode\n  isActive: boolean\n  values: Record<string, any>\n  onChange: (fieldId: string, value: any) => void\n  onSave: () => void\n  index: number\n}\n\n// Dynamically get Lucide icon\nfunction getIcon(iconName: string) {\n  const icons = LucideIcons as unknown as Record<string, React.ComponentType<{ className?: string }>>\n  return icons[iconName] || LucideIcons.Circle\n}\n\nfunction renderField(\n  field: FieldConfig,\n  value: any,\n  onChange: (value: any) => void,\n  glowColor: string,\n  theme: any,\n  isCleanTheme: boolean\n) {\n  // Helper for themed backgrounds using hex opacity\n  const themedBg = `${theme.shimmer.primary}25`\n  const themedBorder = `${theme.shimmer.primary}66`\n  const labelColor = '#ffffff'\n  \n  // Stop propagation wrapper for all field interactions\n  const stopProp = (e: React.SyntheticEvent) => e.stopPropagation()\n\n  switch (field.type) {\n    case 'text':\n      return (\n        <div \n          className=\"p-2 rounded-lg space-y-1\" \n          style={{ background: themedBg, border: `1px solid ${themedBorder}` }}\n          onClick={stopProp}\n        >\n          <label className=\"text-[10px] uppercase tracking-wider\" style={{ color: labelColor, fontWeight: 500 }}>\n            {field.label}\n          </label>\n          <TextField\n            label=\"\"\n            value={value ?? field.defaultValue ?? \"\"}\n            placeholder={field.placeholder}\n            onChange={onChange}\n          />\n        </div>\n      )\n    case 'slider':\n      return (\n        <div \n          className=\"p-2 rounded-lg space-y-1\" \n          style={{ background: themedBg, border: `1px solid ${themedBorder}` }}\n          onClick={stopProp}\n        >\n          <label className=\"text-[10px] uppercase tracking-wider\" style={{ color: labelColor, fontWeight: 500 }}>\n            {field.label}\n          </label>\n          <SliderField\n            label=\"\"\n            value={value ?? field.defaultValue ?? field.min ?? 0}\n            min={field.min ?? 0}\n            max={field.max ?? 100}\n            unit={field.unit}\n            onChange={onChange}\n          />\n        </div>\n      )\n    case 'dropdown':\n      return (\n        <div \n          className=\"p-2 rounded-lg space-y-1\" \n          style={{ background: themedBg, border: `1px solid ${themedBorder}` }}\n          onClick={stopProp}\n        >\n          <label className=\"text-[10px] uppercase tracking-wider\" style={{ color: labelColor, fontWeight: 500 }}>\n            {field.label}\n          </label>\n          <DropdownField\n            label=\"\"\n            value={value ?? field.defaultValue ?? field.options?.[0] ?? \"\"}\n            options={field.options || []}\n            onChange={onChange}\n          />\n        </div>\n      )\n    case 'toggle':\n      return (\n        <div \n          className=\"p-2 rounded-lg flex items-center justify-between\" \n          style={{ background: themedBg, border: `1px solid ${themedBorder}` }}\n          onClick={stopProp}\n        >\n          <label className=\"text-[10px] uppercase tracking-wider\" style={{ color: labelColor, fontWeight: 500 }}>\n            {field.label}\n          </label>\n          <ToggleField\n            label=\"\"\n            value={value ?? field.defaultValue ?? false}\n            onChange={onChange}\n          />\n        </div>\n      )\n    case 'color':\n      return (\n        <div \n          className=\"p-2 rounded-lg space-y-1\" \n          style={{ background: themedBg, border: `1px solid ${themedBorder}` }}\n          onClick={stopProp}\n        >\n          <label className=\"text-[10px] uppercase tracking-wider\" style={{ color: labelColor, fontWeight: 500 }}>\n            {field.label}\n          </label>\n          <ColorField\n            label=\"\"\n            value={value ?? field.defaultValue ?? \"#00D4FF\"}\n            onChange={onChange}\n          />\n        </div>\n      )\n    default:\n      return null\n  }\n}\n\nexport function MiniNodeCard({\n  miniNode,\n  isActive,\n  values,\n  onChange,\n  onSave,\n  index,\n}: MiniNodeCardProps) {\n  const [isConfirming, setIsConfirming] = useState(false)\n  const IconComponent = getIcon(miniNode.icon)\n  const { getThemeConfig } = useBrandColor()\n  const theme = getThemeConfig()\n  const glowColor = theme.glow.color\n  const isCleanTheme = theme.name === 'Verdant' || theme.name === 'Aurum'\n  \n  // Intensity multipliers (same as PrismNode)\n  const intensityMultipliers = {\n    glowOpacity: isCleanTheme ? 1.5 : 1.0,\n    glassOpacity: isCleanTheme ? 1.2 : 1.0,\n    shimmerOpacity: 1.0,\n  }\n  \n  // Calculate dynamic opacities\n  const glassOpacity = Math.min(theme.glass.opacity * intensityMultipliers.glassOpacity, 0.35)\n  const glowOpacity = Math.min(theme.glow.opacity * intensityMultipliers.glowOpacity, 0.5)\n  const shimmerOpacity = Math.min(1 * intensityMultipliers.shimmerOpacity, 1)\n\n  // 2x size of regular nodes (90px â†’ 180px)\n  const CARD_SIZE = 180\n\n  const handleSave = () => {\n    setIsConfirming(true)\n    onSave()\n    setTimeout(() => setIsConfirming(false), 400)\n  }\n\n  // Cards stack vertically with small offset (handled by parent)\n  // Active card lifts up slightly\n  const verticalLift = isActive ? -20 : 0\n\n  return (\n    <motion.div\n      layout\n      initial={{ scale: 0.8, opacity: 0, y: 20 }}\n      animate={{\n        scale: isActive ? 1.05 : 1,\n        opacity: 1,\n        y: verticalLift,\n        zIndex: isActive ? 30 : 20 - index,\n      }}\n      exit={{ scale: 0.8, opacity: 0, y: 20 }}\n      transition={{\n        type: \"spring\",\n        stiffness: 300,\n        damping: 30,\n        duration: 0.3,\n      }}\n      className=\"relative\"\n      style={{\n        width: CARD_SIZE,\n        transformOrigin: \"center center\",\n      }}\n      onClick={(e) => e.stopPropagation()}\n      onMouseDown={(e) => e.stopPropagation()}\n      onPointerDown={(e) => e.stopPropagation()}\n    >\n      {/* Animated border ring - Prism Glass shimmer (NOT for clean themes) */}\n      {!isCleanTheme && (\n        <motion.div\n          className=\"absolute -inset-0.5 pointer-events-none rounded-3xl\"\n          style={{\n            padding: \"2px\",\n            background: `conic-gradient(from 0deg, \n              transparent 0deg, \n              ${theme.shimmer.secondary}${Math.round(30 * shimmerOpacity).toString(16).padStart(2, '0')} 60deg, \n              ${theme.shimmer.primary}${Math.round(isActive ? 255 : 230 * shimmerOpacity).toString(16).padStart(2, '0')} 180deg, \n              ${theme.shimmer.secondary}${Math.round(30 * shimmerOpacity).toString(16).padStart(2, '0')} 300deg, \n              transparent 360deg)`,\n            WebkitMask: \"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)\",\n            WebkitMaskComposite: \"xor\",\n          }}\n          animate={{ rotate: 360 }}\n          transition={{ duration: 8, repeat: Infinity, ease: \"linear\" }}\n        />\n      )}\n\n      {/* Active glow effect - Prism Glass */}\n      {isActive && (\n        <motion.div\n          className=\"absolute -inset-2 pointer-events-none rounded-3xl\"\n          style={{\n            background: `radial-gradient(circle, ${theme.glow.color}${Math.round(glowOpacity * 255).toString(16).padStart(2, '0')} 0%, transparent 70%)`,\n            filter: `blur(${theme.glow.blur}px)`,\n          }}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n        />\n      )}\n\n      {/* Card body - Prism Glass morphism */}\n      <div\n        className=\"relative w-full flex flex-col rounded-3xl overflow-hidden pointer-events-auto\"\n        style={{\n          background: `linear-gradient(${theme.gradient.angle}deg, ${theme.gradient.from}${Math.round(glassOpacity * 255).toString(16).padStart(2, '0')}, ${theme.gradient.to}${Math.round(glassOpacity * 255).toString(16).padStart(2, '0')})`,\n          backdropFilter: `blur(${theme.glass.blur}px)`,\n          WebkitBackdropFilter: `blur(${theme.glass.blur}px)`,\n          border: `1px solid ${theme.shimmer.primary}${Math.round(theme.glass.borderOpacity * 255).toString(16).padStart(2, '0')}`,\n          boxShadow: `inset 0 1px 1px rgba(255,255,255,0.1), 0 4px 24px rgba(0,0,0,0.2)`,\n          minHeight: CARD_SIZE,\n        }}\n      >\n        {/* Themed header background */}\n        <div \n          className=\"absolute top-0 left-0 right-0 h-[52px] pointer-events-none\"\n          style={{\n            background: `linear-gradient(180deg, ${theme.shimmer.primary}40 0%, transparent 100%)`,\n          }}\n        />\n\n        {/* Header */}\n        <div \n          className=\"relative flex items-center justify-center gap-2 px-3 py-3 border-b\"\n          style={{ borderColor: `${theme.shimmer.primary}${Math.round(0.35 * 255).toString(16).padStart(2, '0')}` }}\n        >\n          {React.createElement(IconComponent as React.ComponentType<{ className?: string; style?: React.CSSProperties; strokeWidth?: number }>, {\n            className: \"w-5 h-5\",\n            style: { \n              color: '#ffffff',\n              filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.7))'\n            },\n            strokeWidth: 1.5\n          })}\n          <span className=\"text-xs font-semibold tracking-wider uppercase\" style={{ \n            color: '#ffffff',\n            textShadow: '0 1px 2px rgba(0,0,0,0.7), 0 0 2px rgba(0,0,0,0.5)',\n            letterSpacing: '0.1em'\n          }}>\n            {miniNode.label}\n          </span>\n        </div>\n\n        {/* Fields area */}\n        <div className=\"p-3 space-y-2 flex-1\" style={{ background: `radial-gradient(circle at top, ${theme.shimmer.primary}20 0%, transparent 70%)` }}>\n          {miniNode.fields?.map((field) => (\n            <div key={field.id} className=\"text-xs\">\n              {renderField(field, values[field.id], (value) => onChange(field.id, value), glowColor, theme, isCleanTheme)}\n            </div>\n          ))}\n        </div>\n\n        {/* Save Button - only when active */}\n        <AnimatePresence>\n          {isActive && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"px-3 pb-3\"\n            >\n              <motion.button\n                onClick={(e) => {\n                  e.stopPropagation()\n                  handleSave()\n                }}\n                disabled={isConfirming}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                animate={isConfirming ? { scale: [1, 1.1, 1] } : {}}\n                transition={{ duration: 0.3 }}\n                className=\"w-full py-2 rounded-xl text-xs font-medium transition-all duration-200\"\n                style={{\n                  background: isConfirming \n                    ? \"rgba(34, 197, 94, 0.8)\"\n                    : `linear-gradient(135deg, ${theme.shimmer.primary}cc, ${theme.shimmer.primary}66)`,\n                  color: \"white\",\n                  boxShadow: isConfirming\n                    ? \"0 0 20px rgba(34, 197, 94, 0.4)\"\n                    : `0 0 15px ${theme.glow.color}4d`,\n                }}\n              >\n                {isConfirming ? \"âœ“ Saved\" : \"Save\"}\n              </motion.button>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </motion.div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1575, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/mini-node-stack.tsx"],"sourcesContent":["\"use client\"\n\nimport { useCallback } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport * as LucideIcons from \"lucide-react\"\nimport type { MiniNode } from \"@/types/navigation\"\nimport { MiniNodeCard } from \"./mini-node-card\"\nimport { useNavigation } from \"@/contexts/NavigationContext\"\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\n\ninterface MiniNodeStackProps {\n  miniNodes: MiniNode[]\n}\n\n// Dynamically get Lucide icon\nfunction getIcon(iconName: string) {\n  const icons = LucideIcons as unknown as Record<string, React.ComponentType<{ className?: string; style?: React.CSSProperties }>>\n  return icons[iconName] || LucideIcons.Circle\n}\n\nexport function MiniNodeStack({ miniNodes }: MiniNodeStackProps) {\n  const { getThemeConfig } = useBrandColor()\n  const theme = getThemeConfig()\n  const glowColor = theme.glow.color\n  const isVerdant = theme.orbs === null\n  \n  const {\n    state,\n    updateMiniNodeValue,\n    confirmMiniNode,\n    jumpToMiniNode,\n    rotateStackForward,\n    rotateStackBackward,\n  } = useNavigation()\n\n  const { activeMiniNodeIndex, miniNodeValues } = state\n\n  // Only show up to 4 cards\n  const visibleNodes = miniNodes.slice(0, 4)\n\n  const handleValueChange = useCallback(\n    (nodeId: string, fieldId: string, value: any) => {\n      updateMiniNodeValue(nodeId, fieldId, value)\n    },\n    [updateMiniNodeValue]\n  )\n\n  const handleSave = useCallback(\n    (nodeId: string) => {\n      const values = miniNodeValues[nodeId] || {}\n      confirmMiniNode(nodeId, values)\n    },\n    [confirmMiniNode, miniNodeValues]\n  )\n\n  const handleCardClick = useCallback(\n    (index: number) => {\n      jumpToMiniNode(index)\n    },\n    [jumpToMiniNode]\n  )\n\n  if (miniNodes.length === 0) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        className=\"flex items-center justify-center h-64 text-white/40\"\n      >\n        No settings available\n      </motion.div>\n    )\n  }\n\n  // Cards stacked on top of each other with small vertical offset (like a deck)\n  const containerWidth = 220\n\n  return (\n    <div className=\"relative\" style={{ width: containerWidth }}>\n      <div \n        className=\"relative flex items-center justify-center\"\n        style={{ \n          height: 320,\n          width: containerWidth,\n        }}\n        onClick={(e) => e.stopPropagation()}\n        onMouseDown={(e) => e.stopPropagation()}\n        onPointerDown={(e) => e.stopPropagation()}\n      >\n        <AnimatePresence mode=\"popLayout\">\n          {visibleNodes.map((miniNode, index) => (\n            <motion.div\n              key={miniNode.id}\n              onClick={(e) => {\n                e.stopPropagation()\n                handleCardClick(index)\n              }}\n              onMouseDown={(e) => e.stopPropagation()}\n              onPointerDown={(e) => e.stopPropagation()}\n              className=\"cursor-pointer absolute\"\n              style={{ \n                left: 20, // Centered in container\n                top: index * 8, // Small vertical stack offset (8px per card)\n                zIndex: index === activeMiniNodeIndex ? 30 : 20 - index,\n              }}\n              initial={{ \n                opacity: 0, \n                scale: 0.5, \n                x: -100, // Start from center (left offset)\n                y: 50 \n              }}\n              animate={{ \n                opacity: 1, \n                scale: index === activeMiniNodeIndex ? 1.05 : 1, \n                x: 0, \n                y: 0 \n              }}\n              exit={{ \n                opacity: 0, \n                scale: 0.8, \n                x: -50, // Retract toward center\n                y: 30,\n                transition: { duration: 0.4 } // 400ms exit\n              }}\n              transition={{ \n                duration: 0.6, // 600ms entry\n                delay: index * 0.1, // Stagger cards\n                ease: [0.25, 0.46, 0.45, 0.94] // Smooth easing\n              }}\n            >\n              <MiniNodeCard\n                miniNode={miniNode}\n                isActive={index === activeMiniNodeIndex}\n                values={miniNodeValues[miniNode.id] || {}}\n                onChange={(fieldId, value) =>\n                  handleValueChange(miniNode.id, fieldId, value)\n                }\n                onSave={() => handleSave(miniNode.id)}\n                index={index}\n              />\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n\n      {/* Navigation Controls - Menu Window Style Slider */}\n      <div \n        className=\"absolute -bottom-20 left-1/2 -translate-x-1/2 z-50\"\n        onClick={(e) => e.stopPropagation()}\n        onMouseDown={(e) => e.stopPropagation()}\n        onPointerDown={(e) => e.stopPropagation()}\n      >\n        <div \n          className=\"flex items-center gap-1 px-3 py-2 rounded-2xl\"\n          style={{ \n            background: `linear-gradient(135deg, ${glowColor.replace(')', ', 0.15)')}, ${glowColor.replace(')', ', 0.05)')})`,\n            backdropFilter: 'blur(12px)',\n            border: `1px solid ${glowColor.replace(')', ', 0.2)')}`,\n            boxShadow: `0 4px 24px ${glowColor.replace(')', ', 0.15)')}`,\n          }}\n        >\n          {visibleNodes.map((miniNode, index) => {\n            const IconComponent = getIcon(miniNode.icon)\n            const isActive = index === activeMiniNodeIndex\n            \n            return (\n              <motion.button\n                key={miniNode.id}\n                onClick={(e) => {\n                  e.stopPropagation()\n                  handleCardClick(index)\n                }}\n                onMouseDown={(e) => e.stopPropagation()}\n                onPointerDown={(e) => e.stopPropagation()}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                className=\"relative flex flex-col items-center gap-1 px-3 py-2 rounded-xl transition-all duration-200\"\n                style={{\n                  background: isActive \n                    ? `linear-gradient(135deg, ${glowColor.replace(')', ', 0.3)')}, ${glowColor.replace(')', ', 0.1)')})`\n                    : 'transparent',\n                  border: isActive \n                    ? `1px solid ${glowColor.replace(')', ', 0.5)')}`\n                    : '1px solid transparent',\n                }}\n              >\n                <IconComponent \n                  className=\"w-4 h-4\" \n                  style={{ \n                    color: isActive ? '#ffffff' : `${glowColor.replace(')', ', 0.6)')}`,\n                    filter: isActive ? 'drop-shadow(0 0 4px ' + glowColor + ')' : 'none'\n                  }} \n                />\n                <span \n                  className=\"text-[9px] font-medium uppercase tracking-wider\"\n                  style={{ \n                    color: isActive ? '#ffffff' : `${glowColor.replace(')', ', 0.5)')}`,\n                  }}\n                >\n                  {miniNode.label.slice(0, 6)}\n                </span>\n                \n                {/* Active indicator bar */}\n                {isActive && (\n                  <motion.div\n                    layoutId=\"activeIndicator\"\n                    className=\"absolute -bottom-1 w-8 h-0.5 rounded-full\"\n                    style={{ background: glowColor }}\n                    transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n                  />\n                )}\n              </motion.button>\n            )\n          })}\n        </div>\n        \n        {/* Card Counter */}\n        <div \n          className=\"text-center mt-2 text-[10px] font-medium tracking-wider\"\n          style={{ color: `${glowColor.replace(')', ', 0.6)')}` }}\n        >\n          {activeMiniNodeIndex + 1} / {miniNodes.length}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1870, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/hooks/useTransitionVariants.ts"],"sourcesContent":["'use client'\n\nimport { useTransition } from '@/contexts/TransitionContext'\nimport { getVariantsForTransition, getStaggerDelay } from '@/lib/transitions'\nimport type { Variants } from 'framer-motion'\n\nexport interface TransitionVariants {\n  variants: Variants\n  staggerDelay: number\n  transitionName: string\n}\n\nexport function useTransitionVariants(): TransitionVariants {\n  const { currentTransition } = useTransition()\n  \n  const variants = getVariantsForTransition(currentTransition)\n  const staggerDelay = getStaggerDelay(currentTransition)\n  \n  // Convert transition type to display name\n  const transitionName = currentTransition\n    .split('-')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ')\n  \n  console.log('[useTransitionVariants] Current:', currentTransition, 'Stagger:', staggerDelay)\n  \n  return {\n    variants,\n    staggerDelay,\n    transitionName\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAYO,SAAS;;IACd,MAAM,EAAE,iBAAiB,EAAE,GAAG,IAAA,kJAAa;IAE3C,MAAM,WAAW,IAAA,iJAAwB,EAAC;IAC1C,MAAM,eAAe,IAAA,wIAAe,EAAC;IAErC,0CAA0C;IAC1C,MAAM,iBAAiB,kBACpB,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,OAAQ,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC,IACtD,IAAI,CAAC;IAER,QAAQ,GAAG,CAAC,oCAAoC,mBAAmB,YAAY;IAE/E,OAAO;QACL;QACA;QACA;IACF;AACF;GAnBgB;;QACgB,kJAAa"}},
    {"offset": {"line": 1906, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/iris/prism-node.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { type ElementType } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\nimport { useTransitionVariants } from \"@/hooks/useTransitionVariants\"\n\ntype ThemeIntensity = 'subtle' | 'medium' | 'strong'\n\ninterface PrismNodeProps {\n  node: { id: string; label: string; icon: ElementType; fields?: any[] }\n  angle: number\n  radius: number\n  nodeSize: number\n  onClick: (e?: React.MouseEvent) => void\n  spinRotations: number\n  spinDuration: number\n  staggerIndex: number\n  isCollapsing: boolean\n  isActive: boolean\n  spinConfig: { staggerDelay: number; ease: readonly number[] }\n  themeIntensity?: ThemeIntensity\n}\n\nfunction getSpiralPosition(baseAngle: number, radius: number, spinRotations: number) {\n  const finalAngleRad = (baseAngle * Math.PI) / 180\n  return {\n    x: Math.cos(finalAngleRad) * radius,\n    y: Math.sin(finalAngleRad) * radius,\n    rotation: spinRotations * 360,\n  }\n}\n\nexport function PrismNode({\n  node,\n  angle,\n  radius,\n  nodeSize,\n  onClick,\n  spinRotations,\n  spinDuration,\n  staggerIndex,\n  isCollapsing,\n  isActive,\n  spinConfig,\n  themeIntensity = 'medium',\n}: PrismNodeProps) {\n  const Icon = node.icon\n  const pos = getSpiralPosition(angle, radius, spinRotations)\n  const counterRotation = -pos.rotation\n  const { getThemeConfig } = useBrandColor()\n  const { variants } = useTransitionVariants()\n  \n  // Get complete theme configuration\n  const theme = getThemeConfig()\n\n  // DEBUG: Log theme config\n  console.log('[Nav System] PrismNode theme:', {\n    name: theme.name,\n    gradient: theme.gradient,\n    shimmer: theme.shimmer,\n    glass: theme.glass,\n    glow: theme.glow\n  })\n\n  // Check if theme should have clean look (no rotating effects)\n  const isCleanTheme = theme.name === 'Verdant' || theme.name === 'Aurum'\n\n  // Icon color: always white for maximum contrast across all themes\n  const iconColor = 'rgba(255, 255, 255, 0.95)'\n\n  // Intensity adjustments for glass effect\n  const intensityMultipliers = {\n    subtle: { glassOpacity: 0.7, glowOpacity: 0.6, shimmerOpacity: 0.5 },\n    medium: { glassOpacity: 1.0, glowOpacity: 1.0, shimmerOpacity: 1.0 },\n    strong: { glassOpacity: 1.3, glowOpacity: 1.4, shimmerOpacity: 1.2 },\n  }[themeIntensity]\n\n  // Merge transition variants with position/rotation animations\n  const baseTransition = {\n    duration: spinDuration / 1000,\n    delay: staggerIndex * (spinConfig.staggerDelay / 1000),\n    ease: spinConfig.ease as any,\n  }\n\n  const spiralVariants = {\n    collapsed: { \n      ...variants.hidden,\n      x: 0, y: 0, \n    },\n    expanded: {\n      ...variants.visible,\n      x: pos.x,\n      y: pos.y,\n      rotate: pos.rotation,\n      transition: {\n        ...baseTransition,\n        ...(variants.visible as any)?.transition,\n      },\n    },\n    exit: {\n      ...variants.exit,\n      x: 0,\n      y: 0,\n      transition: {\n        ...baseTransition,\n        ...(variants.exit as any)?.transition,\n      },\n    },\n  }\n\n  const contentVariants = {\n    collapsed: { rotate: 0 },\n    expanded: {\n      rotate: counterRotation,\n      transition: baseTransition,\n    },\n    exit: {\n      rotate: 360,\n      transition: baseTransition,\n    },\n  }\n\n  // Calculate adjusted values based on intensity\n  const glassOpacity = Math.min(theme.glass.opacity * intensityMultipliers.glassOpacity, 0.35)\n  const glowOpacity = Math.min(theme.glow.opacity * intensityMultipliers.glowOpacity, 0.5)\n  const shimmerOpacity = Math.min(1 * intensityMultipliers.shimmerOpacity, 1)\n\n  return (\n    <motion.button\n      className=\"absolute flex flex-col items-center justify-center cursor-pointer z-10 pointer-events-auto\"\n      style={{\n        left: \"50%\",\n        top: \"50%\",\n        marginLeft: -nodeSize / 2,\n        marginTop: -nodeSize / 2,\n        width: nodeSize,\n        height: nodeSize,\n      }}\n      variants={spiralVariants}\n      initial=\"collapsed\"\n      animate={isCollapsing ? \"exit\" : \"expanded\"}\n      exit=\"exit\"\n      onClick={(e) => {\n        e.stopPropagation()\n        onClick(e)\n      }}\n      onMouseDown={(e) => e.stopPropagation()}\n      onPointerDown={(e) => e.stopPropagation()}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n    >\n      {/* 1. Outer glow - soft radial gradient */}\n      <div \n        className=\"absolute -inset-4 rounded-[2.5rem] pointer-events-none\"\n        style={{\n          background: `radial-gradient(circle, ${theme.glow.color}${Math.round(glowOpacity * 255).toString(16).padStart(2, '0')} 0%, transparent 70%)`,\n          filter: `blur(${theme.glow.blur}px)`,\n          opacity: isActive ? 1 : 0.6,\n        }}\n      />\n\n      {/* 2. Active state additional glow */}\n      {isActive && (\n        <motion.div\n          className=\"absolute -inset-3 rounded-[2.5rem] pointer-events-none\"\n          style={{\n            background: `radial-gradient(circle, ${theme.shimmer.primary}50 0%, transparent 60%)`,\n            filter: \"blur(16px)\",\n          }}\n          animate={{ opacity: [0.4, 0.8, 0.4] }}\n          transition={{ duration: 2, repeat: Infinity }}\n        />\n      )}\n\n      {/* 3. Main glass card container */}\n      <div\n        className=\"relative w-full h-full flex flex-col items-center justify-center overflow-hidden\"\n        style={{\n          borderRadius: \"2.5rem\",\n          background: `linear-gradient(${theme.gradient.angle}deg, ${theme.gradient.from}${Math.round(glassOpacity * 255).toString(16).padStart(2, '0')}, ${theme.gradient.to}${Math.round(glassOpacity * 255).toString(16).padStart(2, '0')})`,\n          backdropFilter: `blur(${theme.glass.blur}px)`,\n          border: `1px solid rgba(255,255,255,${theme.glass.borderOpacity})`,\n          boxShadow: `inset 0 1px 1px rgba(255,255,255,0.1), 0 4px 24px rgba(0,0,0,0.2)`,\n        }}\n      >\n        {/* 6. Gradient overlay for depth */}\n        <div \n          className=\"absolute inset-0 rounded-[2.5rem] pointer-events-none\"\n          style={{\n            background: `linear-gradient(135deg, ${theme.gradient.from}30 0%, transparent 50%, ${theme.gradient.to}15 100%)`,\n          }}\n        />\n\n        {/* 7. Floating orbs (conditional - NOT for clean themes) */}\n        {theme.orbs && theme.orbs.map((orb, i) => (\n          <motion.div\n            key={i}\n            className=\"absolute rounded-full pointer-events-none\"\n            style={{\n              width: orb.size * (isActive ? 1.2 : 1),\n              height: orb.size * (isActive ? 1.2 : 1),\n              left: `calc(50% + ${orb.x}px)`,\n              top: `calc(50% + ${orb.y}px)`,\n              marginLeft: -orb.size / 2,\n              marginTop: -orb.size / 2,\n              background: orb.color,\n              filter: `blur(${orb.blur}px)`,\n              opacity: 0.5 * intensityMultipliers.glowOpacity,\n            }}\n            animate={{\n              x: [0, 15, -10, 0],\n              y: [0, -12, 8, 0],\n              scale: [1, 1.15, 0.95, 1],\n            }}\n            transition={{ \n              duration: 8 + i * 2, \n              repeat: Infinity, \n              ease: \"easeInOut\",\n              delay: i * 0.5\n            }}\n          />\n        ))}\n\n        {/* 7. Verdant liquid glass effect - DISABLED, using liquid metal border instead */}\n        {/* {!theme.orbs && (\n          <motion.div\n            className=\"absolute inset-0 rounded-[2.5rem] pointer-events-none\"\n            style={{\n              background: `linear-gradient(90deg, transparent 0%, ${theme.shimmer.primary}10 50%, transparent 100%)`,\n            }}\n            animate={{\n              x: [\"-100%\", \"100%\"],\n            }}\n            transition={{\n              duration: 6,\n              repeat: Infinity,\n              ease: \"easeInOut\",\n            }}\n          />\n        )} */}\n\n        {/* 8. Content: Icon + Label */}\n        <motion.div\n          className=\"relative z-10 flex flex-col items-center justify-center gap-2 pointer-events-none\"\n          variants={contentVariants}\n          initial=\"collapsed\"\n          animate={isCollapsing ? \"exit\" : \"expanded\"}\n        >\n          <Icon \n            className=\"w-6 h-6\" \n            style={{ \n              color: '#ffffff',\n              filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.7))'\n            }} \n            strokeWidth={1.5}\n          />\n          <span \n            className=\"text-[10px] font-semibold tracking-wider uppercase\"\n            style={{ \n              color: '#ffffff',\n              textShadow: '0 1px 2px rgba(0,0,0,0.7), 0 0 2px rgba(0,0,0,0.5)',\n              letterSpacing: '0.1em'\n            }}\n          >\n            {node.label}\n          </span>\n        </motion.div>\n      </div>\n    </motion.button>\n  )\n}\n\n// Backwards compatibility alias\nexport const HexagonalNode = PrismNode\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2210, "column": 0}, "map": {"version":3,"sources":["file:///C:/dev/IRISVOICE/components/hexagonal-control-center.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useState, useCallback, useEffect, useRef, type ElementType } from \"react\"\r\nimport { motion, AnimatePresence } from \"framer-motion\"\r\n\r\n// Tauri imports - only work in Tauri app, not browser\r\nlet getCurrentWindow: any = null\r\nlet PhysicalPosition: any = null\r\nif (typeof window !== 'undefined' && (window as any).__TAURI__) {\r\n  try {\r\n    const tauriWindow = require('@tauri-apps/api/window')\r\n    getCurrentWindow = tauriWindow.getCurrentWindow\r\n    PhysicalPosition = tauriWindow.PhysicalPosition\r\n  } catch (e) {\r\n    console.log('Tauri not available, running in browser mode')\r\n  }\r\n}\r\n\r\nimport { Mic, Brain, Bot, Settings, Database, Activity, Volume2, Headphones, AudioWaveform as Waveform, Link, Cpu, Sparkles, MessageSquare, Palette, Power, Keyboard, Minimize2, RefreshCw, History, FileStack, Trash2, Timer, Clock, BarChart3, DollarSign, TrendingUp, Check, Wrench, Layers, Star, Monitor, HardDrive, Wifi, Bell, Sliders, FileText, Stethoscope, Smile } from \"lucide-react\"\r\nimport { useIRISWebSocket } from \"@/hooks/useIRISWebSocket\"\r\nimport { useNavigation } from \"@/contexts/NavigationContext\"\r\nimport { useBrandColor } from \"@/contexts/BrandColorContext\"\r\nimport { MiniNodeStack } from \"./mini-node-stack\"\r\nimport { PrismNode } from \"./iris/prism-node\"\r\n\r\nconst SPIN_CONFIG = {\r\n  radiusCollapsed: 0,\r\n  radiusExpanded: 180,\r\n  spinDuration: 1500,\r\n  staggerDelay: 100,\r\n  rotations: 2,\r\n  ease: [0.4, 0, 0.2, 1] as const,\r\n}\r\n\r\nconst SUBMENU_CONFIG = {\r\n  radius: 140,\r\n  spinDuration: 1500,\r\n  rotations: 2,\r\n}\r\n\r\nconst MINI_NODE_STACK_CONFIG = {\r\n  size: 90,\r\n  sizeConfirmed: 90,\r\n  borderRadius: 16,\r\n  stackDepth: 50,\r\n  maxVisible: 4,\r\n  offsetX: 0,\r\n  offsetY: 0,\r\n  distanceFromCenter: 260,\r\n  scaleReduction: 0.08,\r\n  padding: 16,\r\n  fieldHeight: 36,\r\n  fieldGap: 12,\r\n}\r\n\r\nconst ORBIT_CONFIG = {\r\n  radius: 200,\r\n  duration: 800,\r\n  ease: [0.34, 1.56, 0.64, 1] as const,\r\n}\r\n\r\nconst NODE_POSITIONS = [\r\n  { index: 0, angle: -90, id: \"voice\", label: \"VOICE\", icon: Mic, hasSubnodes: true },\r\n  { index: 1, angle: -30, id: \"agent\", label: \"AGENT\", icon: Bot, hasSubnodes: true },\r\n  { index: 2, angle: 30, id: \"automate\", label: \"AUTOMATE\", icon: Cpu, hasSubnodes: true },\r\n  { index: 3, angle: 90, id: \"system\", label: \"SYSTEM\", icon: Settings, hasSubnodes: true },\r\n  { index: 4, angle: 150, id: \"customize\", label: \"CUSTOMIZE\", icon: Palette, hasSubnodes: true },\r\n  { index: 5, angle: 210, id: \"monitor\", label: \"MONITOR\", icon: Activity, hasSubnodes: true },\r\n]\r\n\r\nconst SUB_NODES: Record<string, { id: string; label: string; icon: ElementType; fields: any[] }[]> = {\r\n  voice: [\r\n    { id: \"input\", label: \"INPUT\", icon: Mic, fields: [\r\n      { id: \"input_device\", label: \"Input Device\", type: \"dropdown\", options: [\"Default\", \"USB Microphone\", \"Headset\", \"Webcam\"], defaultValue: \"Default\" },\r\n      { id: \"input_sensitivity\", label: \"Input Sensitivity\", type: \"slider\", min: 0, max: 100, unit: \"%\", defaultValue: 50 },\r\n      { id: \"noise_gate\", label: \"Noise Gate\", type: \"toggle\", defaultValue: false },\r\n      { id: \"vad\", label: \"VAD\", type: \"toggle\", defaultValue: true },\r\n    ]},\r\n    { id: \"output\", label: \"OUTPUT\", icon: Volume2, fields: [\r\n      { id: \"output_device\", label: \"Output Device\", type: \"dropdown\", options: [\"Default\", \"Headphones\", \"Speakers\", \"HDMI\"], defaultValue: \"Default\" },\r\n      { id: \"master_volume\", label: \"Master Volume\", type: \"slider\", min: 0, max: 100, unit: \"%\", defaultValue: 70 },\r\n    ]},\r\n    { id: \"processing\", label: \"PROCESSING\", icon: Waveform, fields: [\r\n      { id: \"noise_reduction\", label: \"Noise Reduction\", type: \"toggle\", defaultValue: true },\r\n      { id: \"echo_cancellation\", label: \"Echo Cancellation\", type: \"toggle\", defaultValue: true },\r\n      { id: \"voice_enhancement\", label: \"Voice Enhancement\", type: \"toggle\", defaultValue: false },\r\n      { id: \"automatic_gain\", label: \"Automatic Gain\", type: \"toggle\", defaultValue: true },\r\n    ]},\r\n    { id: \"model\", label: \"MODEL\", icon: Brain, fields: [\r\n      { id: \"endpoint\", label: \"LFM Endpoint\", type: \"text\", placeholder: \"http://localhost:1234\", defaultValue: \"http://localhost:1234\" },\r\n      { id: \"temperature\", label: \"Temperature\", type: \"slider\", min: 0, max: 2, step: 0.1, defaultValue: 0.7 },\r\n      { id: \"max_tokens\", label: \"Max Tokens\", type: \"slider\", min: 256, max: 8192, step: 256, defaultValue: 2048 },\r\n      { id: \"context_window\", label: \"Context Window\", type: \"slider\", min: 1024, max: 32768, step: 1024, defaultValue: 8192 },\r\n    ]},\r\n  ],\r\n  agent: [\r\n    { id: \"identity\", label: \"IDENTITY\", icon: Smile, fields: [\r\n      { id: \"assistant_name\", label: \"Assistant Name\", type: \"text\", placeholder: \"IRIS\", defaultValue: \"IRIS\" },\r\n      { id: \"personality\", label: \"Personality\", type: \"dropdown\", options: [\"Professional\", \"Friendly\", \"Concise\", \"Creative\", \"Technical\"], defaultValue: \"Friendly\" },\r\n      { id: \"knowledge\", label: \"Knowledge Focus\", type: \"dropdown\", options: [\"General\", \"Coding\", \"Writing\", \"Research\", \"Conversation\"], defaultValue: \"General\" },\r\n      { id: \"response_length\", label: \"Response Length\", type: \"dropdown\", options: [\"Brief\", \"Balanced\", \"Detailed\", \"Comprehensive\"], defaultValue: \"Balanced\" },\r\n    ]},\r\n    { id: \"wake\", label: \"WAKE\", icon: Sparkles, fields: [\r\n      { id: \"wake_phrase\", label: \"Wake Phrase\", type: \"text\", placeholder: \"Hey IRIS\", defaultValue: \"Hey IRIS\" },\r\n      { id: \"detection_sensitivity\", label: \"Detection Sensitivity\", type: \"slider\", min: 0, max: 100, defaultValue: 70, unit: \"%\" },\r\n      { id: \"activation_sound\", label: \"Activation Sound\", type: \"toggle\", defaultValue: true },\r\n      { id: \"sleep_timeout\", label: \"Sleep Timeout\", type: \"slider\", min: 5, max: 300, defaultValue: 60, unit: \"s\" },\r\n    ]},\r\n    { id: \"speech\", label: \"SPEECH\", icon: MessageSquare, fields: [\r\n      { id: \"tts_voice\", label: \"TTS Voice\", type: \"dropdown\", options: [\"Nova\", \"Alloy\", \"Echo\", \"Fable\", \"Onyx\", \"Shimmer\"], defaultValue: \"Nova\" },\r\n      { id: \"speaking_rate\", label: \"Speaking Rate\", type: \"slider\", min: 0.5, max: 2, step: 0.1, defaultValue: 1.0, unit: \"x\" },\r\n      { id: \"pitch_adjustment\", label: \"Pitch Adjustment\", type: \"slider\", min: -20, max: 20, defaultValue: 0, unit: \"semitones\" },\r\n      { id: \"pause_duration\", label: \"Pause Duration\", type: \"slider\", min: 0, max: 2, step: 0.1, defaultValue: 0.2, unit: \"s\" },\r\n    ]},\r\n    { id: \"memory\", label: \"MEMORY\", icon: Database, fields: [\r\n      { id: \"context_visualization\", label: \"Context Visualization\", type: \"text\", placeholder: \"View context\" },\r\n      { id: \"token_count\", label: \"Token Count\", type: \"text\", placeholder: \"0 tokens\" },\r\n      { id: \"conversation_history\", label: \"Conversation History\", type: \"text\", placeholder: \"Browse history\" },\r\n      { id: \"clear_memory\", label: \"Clear Memory\", type: \"text\", placeholder: \"Clear\" },\r\n    ]},\r\n  ],\r\n  automate: [\r\n    { id: \"tools\", label: \"TOOLS\", icon: Wrench, fields: [\r\n      { id: \"active_servers\", label: \"Active Servers\", type: \"text\", placeholder: \"Server status\" },\r\n      { id: \"tool_browser\", label: \"Tool Browser\", type: \"text\", placeholder: \"Browse tools\" },\r\n      { id: \"quick_actions\", label: \"Quick Actions\", type: \"text\", placeholder: \"Recent tools\" },\r\n    ]},\r\n    { id: \"workflows\", label: \"WORKFLOWS\", icon: Layers, fields: [\r\n      { id: \"workflow_list\", label: \"Workflow List\", type: \"text\", placeholder: \"Saved workflows\" },\r\n      { id: \"create_workflow\", label: \"Create Workflow\", type: \"text\", placeholder: \"Builder\" },\r\n      { id: \"schedule\", label: \"Schedule\", type: \"text\", placeholder: \"Schedule\" },\r\n    ]},\r\n    { id: \"favorites\", label: \"FAVORITES\", icon: Star, fields: [\r\n      { id: \"favorite_commands\", label: \"Favorite Commands\", type: \"text\", placeholder: \"Pinned actions\" },\r\n      { id: \"recent_actions\", label: \"Recent Actions\", type: \"text\", placeholder: \"Recent\" },\r\n      { id: \"success_rate\", label: \"Success Rate\", type: \"text\", placeholder: \"0%\" },\r\n    ]},\r\n    { id: \"shortcuts\", label: \"SHORTCUTS\", icon: Keyboard, fields: [\r\n      { id: \"global_hotkey\", label: \"Global Hotkey\", type: \"text\", placeholder: \"Ctrl+Space\", defaultValue: \"Ctrl+Space\" },\r\n      { id: \"voice_commands\", label: \"Voice Commands\", type: \"text\", placeholder: \"Map commands\" },\r\n    ]},\r\n    { id: \"gui\", label: \"GUI AUTOMATION\", icon: Monitor, fields: [\r\n      { id: \"ui_tars_provider\", label: \"UI-TARS Provider\", type: \"dropdown\", options: [\"cli_npx\", \"native_python\", \"api_cloud\"], defaultValue: \"native_python\" },\r\n      { id: \"model_provider\", label: \"Vision Model\", type: \"dropdown\", options: [\"anthropic\", \"volcengine\", \"local\"], defaultValue: \"anthropic\" },\r\n      { id: \"api_key\", label: \"API Key\", type: \"text\", placeholder: \"sk-...\" },\r\n      { id: \"max_steps\", label: \"Max Automation Steps\", type: \"slider\", min: 5, max: 50, defaultValue: 25 },\r\n      { id: \"safety_confirmation\", label: \"Require Confirmation\", type: \"toggle\", defaultValue: true },\r\n    ]},\r\n  ],\r\n  system: [\r\n    { id: \"power\", label: \"POWER\", icon: Power, fields: [\r\n      { id: \"shutdown\", label: \"Shutdown\", type: \"text\", placeholder: \"Shutdown\" },\r\n      { id: \"restart\", label: \"Restart\", type: \"text\", placeholder: \"Restart\" },\r\n      { id: \"sleep\", label: \"Sleep\", type: \"text\", placeholder: \"Sleep\" },\r\n      { id: \"power_profile\", label: \"Power Profile\", type: \"dropdown\", options: [\"Balanced\", \"Performance\", \"Battery\"], defaultValue: \"Balanced\" },\r\n    ]},\r\n    { id: \"display\", label: \"DISPLAY\", icon: Monitor, fields: [\r\n      { id: \"brightness\", label: \"Brightness\", type: \"slider\", min: 0, max: 100, defaultValue: 50, unit: \"%\" },\r\n      { id: \"resolution\", label: \"Resolution\", type: \"dropdown\", options: [\"Auto\", \"1920x1080\", \"2560x1440\", \"3840x2160\"], defaultValue: \"Auto\" },\r\n      { id: \"night_mode\", label: \"Night Mode\", type: \"toggle\", defaultValue: false },\r\n    ]},\r\n    { id: \"storage\", label: \"STORAGE\", icon: HardDrive, fields: [\r\n      { id: \"disk_usage\", label: \"Disk Usage\", type: \"text\", placeholder: \"Usage\" },\r\n      { id: \"quick_folders\", label: \"Quick Folders\", type: \"text\", placeholder: \"Desktop/Downloads/Documents\" },\r\n      { id: \"cleanup\", label: \"Cleanup\", type: \"text\", placeholder: \"Cleanup\" },\r\n    ]},\r\n    { id: \"network\", label: \"NETWORK\", icon: Wifi, fields: [\r\n      { id: \"wifi_toggle\", label: \"WiFi\", type: \"toggle\", defaultValue: true },\r\n      { id: \"ethernet_status\", label: \"Ethernet Status\", type: \"text\", placeholder: \"Connected\" },\r\n      { id: \"vpn_connection\", label: \"VPN Connection\", type: \"dropdown\", options: [\"None\", \"Work\", \"Personal\"], defaultValue: \"None\" },\r\n    ]},\r\n  ],\r\n  customize: [\r\n    { id: \"theme\", label: \"THEME\", icon: Palette, fields: [\r\n      { id: \"theme_mode\", label: \"Theme Mode\", type: \"dropdown\", options: [\"Dark\", \"Light\", \"Auto\"], defaultValue: \"Dark\" },\r\n      { id: \"glow_color\", label: \"Glow Color\", type: \"color\", defaultValue: \"#00ff88\" },\r\n      { id: \"state_colors\", label: \"State Colors\", type: \"toggle\", defaultValue: false },\r\n    ]},\r\n    { id: \"startup\", label: \"STARTUP\", icon: Power, fields: [\r\n      { id: \"launch_startup\", label: \"Launch at Startup\", type: \"toggle\", defaultValue: false },\r\n      { id: \"startup_behavior\", label: \"Startup Behavior\", type: \"dropdown\", options: [\"Show Widget\", \"Start Minimized\", \"Start Hidden\"], defaultValue: \"Show Widget\" },\r\n      { id: \"welcome_message\", label: \"Welcome Message\", type: \"toggle\", defaultValue: true },\r\n    ]},\r\n    { id: \"behavior\", label: \"BEHAVIOR\", icon: Sliders, fields: [\r\n      { id: \"confirm_destructive\", label: \"Confirm Destructive\", type: \"toggle\", defaultValue: true },\r\n      { id: \"undo_history\", label: \"Undo History\", type: \"slider\", min: 0, max: 50, defaultValue: 10, unit: \"actions\" },\r\n      { id: \"auto_save\", label: \"Auto Save\", type: \"toggle\", defaultValue: true },\r\n    ]},\r\n    { id: \"notifications\", label: \"NOTIFICATIONS\", icon: Bell, fields: [\r\n      { id: \"dnd_toggle\", label: \"Do Not Disturb\", type: \"toggle\", defaultValue: false },\r\n      { id: \"notification_sound\", label: \"Notification Sound\", type: \"dropdown\", options: [\"Default\", \"Chime\", \"Pulse\", \"Silent\"], defaultValue: \"Default\" },\r\n      { id: \"app_notifications\", label: \"App Notifications\", type: \"toggle\", defaultValue: true },\r\n    ]},\r\n  ],\r\n  monitor: [\r\n    { id: \"analytics\", label: \"ANALYTICS\", icon: BarChart3, fields: [\r\n      { id: \"token_usage\", label: \"Token Usage\", type: \"text\", placeholder: \"Usage\" },\r\n      { id: \"response_latency\", label: \"Response Latency\", type: \"text\", placeholder: \"Latency\" },\r\n      { id: \"session_duration\", label: \"Session Duration\", type: \"text\", placeholder: \"Duration\" },\r\n    ]},\r\n    { id: \"logs\", label: \"LOGS\", icon: FileText, fields: [\r\n      { id: \"system_logs\", label: \"System Logs\", type: \"text\", placeholder: \"System\" },\r\n      { id: \"voice_logs\", label: \"Voice Logs\", type: \"text\", placeholder: \"Voice\" },\r\n      { id: \"mcp_logs\", label: \"MCP Logs\", type: \"text\", placeholder: \"MCP\" },\r\n      { id: \"export_logs\", label: \"Export Logs\", type: \"text\", placeholder: \"Export\" },\r\n    ]},\r\n    { id: \"diagnostics\", label: \"DIAGNOSTICS\", icon: Stethoscope, fields: [\r\n      { id: \"health_check\", label: \"Health Check\", type: \"text\", placeholder: \"Run\" },\r\n      { id: \"lfm_benchmark\", label: \"LFM Benchmark\", type: \"text\", placeholder: \"Benchmark\" },\r\n      { id: \"mcp_test\", label: \"MCP Test\", type: \"text\", placeholder: \"Test MCP\" },\r\n    ]},\r\n    { id: \"updates\", label: \"UPDATES\", icon: RefreshCw, fields: [\r\n      { id: \"update_channel\", label: \"Update Channel\", type: \"dropdown\", options: [\"Stable\", \"Beta\", \"Nightly\"], defaultValue: \"Stable\" },\r\n      { id: \"check_updates\", label: \"Check Updates\", type: \"text\", placeholder: \"Check\" },\r\n      { id: \"auto_update\", label: \"Auto Update\", type: \"toggle\", defaultValue: true },\r\n    ]},\r\n  ],\r\n}\r\n\r\ninterface InputField {\r\n  id: string\r\n  label: string\r\n  type: \"text\" | \"slider\" | \"dropdown\" | \"toggle\" | \"color\"\r\n  placeholder?: string\r\n  options?: string[]\r\n  min?: number\r\n  max?: number\r\n  step?: number\r\n  unit?: string\r\n  defaultValue?: string | number | boolean\r\n}\r\n\r\ninterface ConfirmedMiniNode {\r\n  id: string\r\n  label: string\r\n  icon: ElementType | string\r\n  orbitAngle: number\r\n  values: Record<string, string | number | boolean>\r\n}\r\n\r\nfunction useIsMobile() {\r\n  const [isMobile, setIsMobile] = useState(false)\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth < 640)\r\n    checkMobile()\r\n    window.addEventListener(\"resize\", checkMobile)\r\n    return () => window.removeEventListener(\"resize\", checkMobile)\r\n  }, [])\r\n  return isMobile\r\n}\r\n\r\nfunction getSpiralPosition(baseAngle: number, radius: number, spinRotations: number) {\r\n  const finalAngleRad = (baseAngle * Math.PI) / 180\r\n  return {\r\n    x: Math.cos(finalAngleRad) * radius,\r\n    y: Math.sin(finalAngleRad) * radius,\r\n    rotation: spinRotations * 360,\r\n  }\r\n}\r\n\r\nconst ICON_MAP: Record<string, ElementType> = {\r\n  Mic, Brain, Bot, Settings, Database, Activity, Volume2, Headphones, Waveform, \r\n  Link, Cpu, Sparkles, MessageSquare, \r\n  Palette, Power, Keyboard, Minimize2, RefreshCw, History, \r\n  FileStack, Trash2, Timer, Clock, BarChart3, DollarSign, TrendingUp,\r\n  Wrench, Layers, Star, Monitor, HardDrive, Wifi, Bell, Sliders, FileText, Stethoscope, Smile,\r\n}\r\n\r\n// ===========================================\r\n// MANUAL DRAG HOOK (Replaces useDragOrClick)\r\n// Uses setPosition instead of startDragging to bypass Windows Snap Assist\r\n// ===========================================\r\nfunction useManualDragWindow(onClickAction: () => void) {\r\n  const isDragging = useRef(false)\r\n  const dragStartPos = useRef({ x: 0, y: 0 })\r\n  const windowStartPos = useRef({ x: 0, y: 0 })\r\n  const hasDragged = useRef(false)\r\n\r\n  const handleMouseDown = useCallback(async (e: React.MouseEvent) => {\r\n    if (e.button !== 0) return\r\n    \r\n    // Only enable dragging in Tauri app\r\n    if (!getCurrentWindow) return\r\n    \r\n    isDragging.current = true\r\n    hasDragged.current = false\r\n    dragStartPos.current = { x: e.screenX, y: e.screenY }\r\n    \r\n    const win = getCurrentWindow()\r\n    const pos = await win.outerPosition()\r\n    windowStartPos.current = { x: pos.x, y: pos.y }\r\n    \r\n    document.body.style.cursor = 'grabbing'\r\n    document.body.style.userSelect = 'none'\r\n  }, [])\r\n\r\n  const handleMouseMove = useCallback((e: MouseEvent) => {\r\n    if (!isDragging.current) return\r\n    \r\n    // Only enable dragging in Tauri app\r\n    if (!getCurrentWindow || !PhysicalPosition) return\r\n    \r\n    const dx = e.screenX - dragStartPos.current.x\r\n    const dy = e.screenY - dragStartPos.current.y\r\n    \r\n    if (Math.abs(dx) > 5 || Math.abs(dy) > 5) {\r\n      hasDragged.current = true\r\n    }\r\n    \r\n    const win = getCurrentWindow()\r\n    win.setPosition(new PhysicalPosition(windowStartPos.current.x + dx, windowStartPos.current.y + dy))\r\n  }, [])\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    isDragging.current = false\r\n    document.body.style.cursor = 'default'\r\n    document.body.style.userSelect = ''\r\n    \r\n    // If we didn't drag significantly, it was a click\r\n    if (!hasDragged.current) {\r\n      onClickAction()\r\n    }\r\n  }, [onClickAction])\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('mousemove', handleMouseMove)\r\n    window.addEventListener('mouseup', handleMouseUp)\r\n    \r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove)\r\n      window.removeEventListener('mouseup', handleMouseUp)\r\n    }\r\n  }, [handleMouseMove, handleMouseUp])\r\n\r\n  return { handleMouseDown }\r\n}\r\n\r\ninterface IrisOrbProps {\r\n  isExpanded: boolean\r\n  onClick: () => void\r\n  centerLabel: string\r\n  size: number\r\n  glowColor: string\r\n}\r\n\r\nfunction IrisOrb({ isExpanded, onClick, centerLabel, size, glowColor }: IrisOrbProps) {\r\n  const { handleMouseDown } = useManualDragWindow(onClick)\r\n  const [isWaking, setIsWaking] = useState(false)\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"relative flex items-center justify-center rounded-full cursor-grab active:cursor-grabbing z-50 pointer-events-auto\"\r\n      style={{ width: size, height: size }}\r\n      onMouseDown={handleMouseDown}\r\n    >\r\n      {/* Outer breathe glow - more vibrant */}\r\n      <motion.div\r\n        className=\"absolute rounded-full pointer-events-none\"\r\n        style={{\r\n          inset: -70,\r\n          background: `radial-gradient(circle, ${glowColor}90 0%, ${glowColor}50 30%, transparent 70%)`,\r\n          filter: \"blur(40px)\",\r\n        }}\r\n        animate={{ scale: [1, 1.7, 1], opacity: [0.7, 1, 0.7] }}\r\n        transition={{ duration: 5, repeat: Infinity, ease: \"easeInOut\" }}\r\n      />\r\n\r\n      {/* Inner core pulse */}\r\n      <motion.div\r\n        className=\"absolute rounded-full pointer-events-none\"\r\n        style={{\r\n          inset: -8,\r\n          background: `radial-gradient(circle at 30% 30%, ${glowColor}14, transparent 70%)`,\r\n          filter: \"blur(8px)\",\r\n        }}\r\n        animate={{ scale: [0.8, 1.4, 0.8], opacity: [0.7, 1, 0.7] }}\r\n        transition={{ duration: 3, repeat: Infinity, ease: \"easeInOut\" }}\r\n      />\r\n\r\n      {/* Wake flash */}\r\n      <AnimatePresence>\r\n        {isWaking && centerLabel !== \"IRIS\" && (\r\n          <motion.div\r\n            className=\"absolute rounded-full pointer-events-none\"\r\n            style={{ inset: -20, backgroundColor: `${glowColor}99` }}\r\n            initial={{ opacity: 0, scale: 0.8 }}\r\n            animate={{ opacity: 1, scale: 1.5 }}\r\n            exit={{ opacity: 0, scale: 2 }}\r\n            transition={{ duration: 0.3 }}\r\n          />\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Radar Sweep - rotating light across orb surface */}\r\n      <motion.div\r\n        className=\"absolute inset-0 rounded-full pointer-events-none overflow-hidden\"\r\n        style={{\r\n          background: 'transparent',\r\n        }}\r\n      >\r\n        <motion.div\r\n          className=\"absolute inset-0\"\r\n          style={{\r\n            background: `conic-gradient(from 0deg at 50% 50%,\r\n              transparent 0deg,\r\n              transparent 88deg,\r\n              rgba(255,255,255,0.15) 98deg,\r\n              rgba(255,255,255,0.8) 100deg,\r\n              rgba(255,255,255,0.15) 102deg,\r\n              transparent 112deg,\r\n              transparent 360deg)`,\r\n          }}\r\n          animate={{ rotate: 360 }}\r\n          transition={{ duration: 4, repeat: Infinity, ease: \"linear\" }}\r\n        />\r\n      </motion.div>\r\n\r\n      {/* Thin liquid metal border - metallic reflection */}\r\n      <motion.div\r\n        className=\"absolute -inset-[3px] rounded-full pointer-events-none\"\r\n        style={{\r\n          padding: \"3px\",\r\n          background: `conic-gradient(from 0deg, \r\n            rgba(255,255,255,0) 0deg,\r\n            rgba(255,255,255,0.5) 90deg,\r\n            rgba(192,192,192,0.6) 180deg,\r\n            rgba(255,255,255,0.5) 270deg,\r\n            rgba(255,255,255,0) 360deg)`,\r\n          WebkitMask: \"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)\",\r\n          WebkitMaskComposite: \"xor\",\r\n        }}\r\n        animate={{ rotate: -360 }}\r\n        transition={{ duration: 12, repeat: Infinity, ease: \"linear\" }}\r\n      />\r\n\r\n      {/* Rotating shimmer */}\r\n      <motion.div\r\n        className=\"absolute rounded-full pointer-events-none\"\r\n        style={{\r\n          inset: -3,\r\n          borderRadius: \"50%\",\r\n          padding: \"3px\",\r\n          background: `conic-gradient(from 0deg, transparent 0deg, ${glowColor}4d 90deg, ${glowColor}cc 180deg, ${glowColor}4d 270deg, transparent 360deg)`,\r\n          WebkitMask: \"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)\",\r\n          WebkitMaskComposite: \"xor\",\r\n        }}\r\n        animate={{ rotate: 360 }}\r\n        transition={{ duration: 10, repeat: Infinity, ease: \"linear\" }}\r\n      />\r\n\r\n      {/* Orb body */}\r\n      <div\r\n        className=\"relative w-full h-full flex items-center justify-center rounded-full pointer-events-none\"\r\n        style={{\r\n          background: \"rgba(255, 255, 255, 0.05)\",\r\n          backdropFilter: \"blur(20px)\",\r\n          border: \"1px solid rgba(255, 255, 255, 0.1)\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n          style={{ background: `radial-gradient(circle at 30% 30%, ${glowColor}14, transparent 70%)` }}\r\n        />\r\n\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.span\r\n            key={centerLabel}\r\n            className=\"text-lg font-medium tracking-[0.2em] select-none pointer-events-none\"\r\n            style={{ \r\n              color: \"#ffffff\",\r\n              textShadow: '0 0 4px rgba(0,0,0,0.8), 0 2px 4px rgba(0,0,0,0.6)'\r\n            }}\r\n            initial={{ scale: 0, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0, opacity: 0 }}\r\n            transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\r\n          >\r\n            <motion.span\r\n              animate={{ textShadow: [`0 0 10px ${glowColor}4d`, `0 0 20px ${glowColor}99`, `0 0 10px ${glowColor}4d`] }}\r\n              transition={{ duration: 4, repeat: Infinity, ease: \"easeInOut\" }}\r\n            >\r\n              {centerLabel}\r\n            </motion.span>\r\n          </motion.span>\r\n        </AnimatePresence>\r\n      </div>\r\n    </motion.div>\r\n  )\r\n}\r\n\r\nexport function HexagonalControlCenter() {\r\n  const nav = useNavigation()\r\n  const { getThemeConfig, theme: brandTheme, setTheme } = useBrandColor()\r\n  const theme = getThemeConfig()\r\n  const themeGlowColor = theme.glow.color\r\n  \r\n  // DEBUG: Log theme state\r\n  useEffect(() => {\r\n    console.log('[Nav System] BrandColorContext theme:', brandTheme)\r\n    console.log('[Nav System] Computed theme config:', theme.name, 'glow:', themeGlowColor)\r\n  }, [brandTheme, theme, themeGlowColor])\r\n  \r\n  const {\r\n    theme: wsTheme,\r\n    confirmedNodes: wsConfirmedNodes,\r\n    currentCategory,\r\n    currentSubnode,\r\n    selectCategory,\r\n    selectSubnode,\r\n    confirmMiniNode,\r\n    updateTheme,\r\n  } = useIRISWebSocket(\"ws://localhost:8000/ws/iris\")\r\n\r\n  const [currentView, setCurrentView] = useState<string | null>(null)\r\n  const [pendingView, setPendingView] = useState<string | null>(null)\r\n  const [exitingView, setExitingView] = useState<string | null>(null)\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const [isTransitioning, setIsTransitioning] = useState(false)\r\n  const [activeMiniNodeIndex, setActiveMiniNodeIndex] = useState<number | null>(null)\r\n  const isMobile = useIsMobile()\r\n\r\n  // Refs for tracking navigation state and preventing stale closures\r\n  const userNavigatedRef = useRef(false)\r\n  const navLevelRef = useRef(nav.state.level)\r\n  const nodeClickTimestampRef = useRef<number | null>(null)\r\n\r\n  // Update navLevelRef on every render to keep it fresh\r\n  useEffect(() => {\r\n    navLevelRef.current = nav.state.level\r\n  }, [nav.state.level])\r\n\r\n  // Ensure window starts interactive (solid, not click-through) - Tauri only\r\n  useEffect(() => {\r\n    if (!getCurrentWindow) return\r\n    \r\n    const setupWindow = async () => {\r\n      const appWindow = await getCurrentWindow()\r\n      await appWindow.setIgnoreCursorEvents(false)\r\n    }\r\n    setupWindow()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // Skip backend sync if user has manually navigated\r\n    if (userNavigatedRef.current) {\r\n      console.log('[Nav System] Skipping backend sync - user has manually navigated')\r\n      return\r\n    }\r\n    \r\n    // Skip if category is empty (user just cleared it)\r\n    if (!currentCategory) {\r\n      console.log('[Nav System] Skipping backend sync - currentCategory is empty')\r\n      return\r\n    }\r\n    \r\n    console.log('[Nav System] Backend sync useEffect running:', {\r\n      currentCategory,\r\n      currentView,\r\n      isTransitioning,\r\n      pendingView,\r\n      exitingView,\r\n      navLevel: nav.state.level,\r\n      isExpanded,\r\n      condition: !isTransitioning && !pendingView && currentCategory !== currentView && !exitingView\r\n    })\r\n    \r\n    // CRITICAL FIX: Don't auto-navigate to Level 3 on initial load/refresh\r\n    // Only sync the view without advancing navigation level automatically\r\n    // This prevents the \"random main node on refresh\" issue\r\n    if (!isTransitioning && !pendingView && currentCategory !== currentView && !exitingView) {\r\n      console.log('[Nav System] Setting currentView to currentCategory (without auto-navigating):', currentCategory)\r\n      setCurrentView(currentCategory)\r\n      \r\n      // Only expand to show main nodes (Level 2), don't auto-select a main node\r\n      // This prevents the backend from forcing Level 3 on refresh\r\n      if (!isExpanded && nav.state.level === 1) {\r\n        console.log('[Nav System] Expanding to main nodes (Level 2) from backend category')\r\n        setIsExpanded(true)\r\n        nav.expandToMain()\r\n      }\r\n      // Note: We intentionally do NOT call nav.selectMain() here\r\n      // User must explicitly click a main node to reach Level 3\r\n    }\r\n    \r\n    if (pendingView && currentCategory === pendingView) {\r\n      setPendingView(null)\r\n    }\r\n  }, [currentCategory, currentView, exitingView, isTransitioning, pendingView, isExpanded, nav])\r\n  \r\n  const glowColor = themeGlowColor || \"#00ff88\"\r\n\r\n  const activeSubnodeId = currentSubnode\r\n  const centerLabel = activeSubnodeId \r\n    ? (currentView && SUB_NODES[currentView]?.find(n => n.id === activeSubnodeId)?.label || \"IRIS\")\r\n    : (currentView ? NODE_POSITIONS.find(n => n.id === currentView)?.label : \"IRIS\") || \"IRIS\"\r\n\r\n  const confirmedNodes: ConfirmedMiniNode[] = wsConfirmedNodes.map(n => ({\r\n    id: n.id,\r\n    label: n.label,\r\n    icon: n.icon,\r\n    orbitAngle: n.orbit_angle,\r\n    values: n.values\r\n  }))\r\n\r\n  const irisSize = isMobile ? 110 : 140\r\n  const nodeSize = isMobile ? 72 : 90\r\n  const mainRadius = isMobile ? 140 : SPIN_CONFIG.radiusExpanded\r\n  const subRadius = isMobile ? 110 : SUBMENU_CONFIG.radius\r\n  const orbitRadius = isMobile ? 160 : ORBIT_CONFIG.radius\r\n\r\n  const handleNodeClick = useCallback(\r\n    (nodeId: string, nodeLabel: string, hasSubnodes: boolean) => {\r\n      const currentNavLevel = nav.state.level\r\n      \r\n      console.log('[Nav System] handleNodeClick START:', { \r\n        nodeId, \r\n        nodeLabel, \r\n        hasSubnodes, \r\n        currentView, \r\n        isTransitioning, \r\n        navLevel: currentNavLevel,\r\n        timestamp: Date.now()\r\n      })\r\n      \r\n      if (isTransitioning) {\r\n        console.log('[Nav System] handleNodeClick blocked - isTransitioning')\r\n        return\r\n      }\r\n\r\n      // Navigate if:\r\n      // 1. At Level 2 (main nodes showing) - clicking goes to Level 3\r\n      // 2. At Level 3 but clicking a DIFFERENT main node - switch to that node's subnodes\r\n      const shouldNavigate = currentNavLevel === 2 || \r\n        (currentNavLevel === 3 && nav.state.selectedMain !== nodeId)\r\n\r\n      if (shouldNavigate) {\r\n        console.log('[Nav System] Should navigate to subnodes:', { nodeId, fromLevel: currentNavLevel })\r\n        if (SUB_NODES[nodeId]?.length > 0) {\r\n          console.log('[Nav System] Found subnodes, proceeding with navigation')\r\n          userNavigatedRef.current = true\r\n          setExitingView(currentNavLevel === 3 ? nav.state.selectedMain : \"__main__\")\r\n          setIsTransitioning(true)\r\n          setActiveMiniNodeIndex(null)\r\n          setPendingView(nodeId)\r\n          setCurrentView(nodeId)\r\n\r\n          // If at Level 3, go back first then to new main\r\n          if (currentNavLevel === 3) {\r\n            nav.goBack() // Go from Level 3â†’2 first\r\n          }\r\n\r\n          // Use NavigationContext to advance to Level 3\r\n          console.log('[Nav System] Calling nav.selectMain() for nodeId:', nodeId)\r\n          nav.selectMain(nodeId)\r\n          console.log('[Nav System] selectMain called:', { nodeId, level: nav.state.level })\r\n\r\n          setTimeout(() => {\r\n            console.log('[Nav System] Transition timeout completed')\r\n            setExitingView(null)\r\n            setIsTransitioning(false)\r\n            selectCategory(nodeId)\r\n            // Reset userNavigatedRef to allow backend sync again\r\n            userNavigatedRef.current = false\r\n          }, SPIN_CONFIG.spinDuration)\r\n        } else {\r\n          console.log('[Nav System] No subnodes found for nodeId:', nodeId)\r\n        }\r\n      } else {\r\n        console.log('[Nav System] Skipping navigation:', { currentNavLevel, nodeId })\r\n      }\r\n    },\r\n    [isTransitioning, selectCategory, nav, currentView]\r\n  )\r\n\r\n  const handleSubnodeClick = useCallback((subnodeId: string) => {\r\n    // Read nav.state.level fresh to avoid stale closure\r\n    const currentNavLevel = nav.state.level\r\n    \r\n    console.log('[Nav System] handleSubnodeClick START:', { \r\n      subnodeId, \r\n      activeSubnodeId,\r\n      currentView,\r\n      navLevel: currentNavLevel,\r\n      navSelectedMain: nav.state.selectedMain,\r\n      navSelectedSub: nav.state.selectedSub\r\n    })\r\n\r\n    if (activeSubnodeId === subnodeId) {\r\n      console.log('[Nav System] Deselecting subnode, going back to Level 3')\r\n      selectSubnode(null)\r\n      nav.goBack()\r\n      setActiveMiniNodeIndex(null)\r\n    } else {\r\n      // Get mini nodes for this subnode and navigate to level 4\r\n      const subnodeData = SUB_NODES[currentView!]?.find(n => n.id === subnodeId)\r\n      // Transform fields into proper MiniNode objects - each field becomes a card in the stack\r\n      const fields = subnodeData?.fields || []\r\n      const miniNodes: import(\"@/types/navigation\").MiniNode[] = fields.map((field, index) => ({\r\n        id: `${subnodeId}_${field.id}`,\r\n        label: field.label,\r\n        icon: \"Settings\",\r\n        fields: [field]\r\n      }))\r\n\r\n      console.log('[Nav System] Attempting Level 4 navigation:', { \r\n        subnodeId, \r\n        subnodeFound: !!subnodeData,\r\n        miniNodesCount: miniNodes.length,\r\n        miniNodes: miniNodes,\r\n      })\r\n      \r\n      // CRITICAL: Call nav.selectSub() FIRST to trigger Level 4 navigation\r\n      // This updates the navigation state and sets miniNodeStack\r\n      nav.selectSub(subnodeId, miniNodes)\r\n      \r\n      // Update backend state\r\n      selectSubnode(subnodeId)\r\n    }\r\n  }, [activeSubnodeId, currentView, nav, selectSubnode])\r\n\r\n  const handleIrisClick = useCallback((e?: React.MouseEvent) => {\r\n    // CRITICAL FIX: Read nav level from the ref which is updated every render\r\n    const freshNavLevel = navLevelRef.current\r\n    \r\n    console.log('[Nav System] handleIrisClick START:', { isTransitioning, activeSubnodeId, currentView, isExpanded, freshNavLevel, target: e?.target })\r\n\r\n    // Check if a node was just clicked (within last 300ms) - prevents iris toggle when clicking nodes\r\n    const timeSinceNodeClick = Date.now() - (nodeClickTimestampRef.current || 0)\r\n    if (timeSinceNodeClick < 300) {\r\n      console.log('[Nav System] handleIrisClick blocked - node was just clicked', timeSinceNodeClick, 'ms ago')\r\n      return\r\n    }\r\n\r\n    if (isTransitioning) {\r\n      console.log('[Nav System] handleIrisClick blocked - isTransitioning')\r\n      return\r\n    }\r\n\r\n    // Use freshNavLevel to determine proper back navigation (not the stale closure value)\r\n    const level = freshNavLevel\r\n    \r\n    // DEFENSIVE: Prevent any back navigation if we're transitioning\r\n    if (isTransitioning) {\r\n      console.log('[Nav System] handleIrisClick blocked - isTransitioning')\r\n      return\r\n    }\r\n    \r\n    // DEFENSIVE: Check if userNavigatedRef is already true (prevent double navigation)\r\n    if (userNavigatedRef.current) {\r\n      console.log('[Nav System] handleIrisClick blocked - userNavigatedRef already true')\r\n      return\r\n    }\r\n    \r\n    console.log('[Nav System] handleIrisClick proceeding with level:', level)\r\n    \r\n    if (level === 4) {\r\n      // Level 4: Mini nodes active -> go back to level 3 (subnodes)\r\n      console.log('[Nav System] handleIrisClick: Level 4->3, deselecting subnode')\r\n      userNavigatedRef.current = true\r\n      // IMPORTANT: Call nav.goBack() FIRST before clearing backend state\r\n      // This ensures navigation state changes before backend sync can interfere\r\n      nav.goBack()\r\n      // Now clear backend state after navigation is initiated\r\n      // Keep userNavigatedRef = true during this to prevent backend sync from interfering\r\n      selectSubnode(null)\r\n      setActiveMiniNodeIndex(null)\r\n      // Reset userNavigatedRef AFTER a short delay to ensure navigation completes\r\n      setTimeout(() => {\r\n        userNavigatedRef.current = false\r\n        console.log('[Nav System] userNavigatedRef reset after Level 4->3 navigation')\r\n      }, 100)\r\n    } else if (level === 3) {\r\n      // Level 3: Subnodes showing -> go back to level 2 (main nodes)\r\n      console.log('[Nav System] handleIrisClick: Level 3->2, going back to main nodes')\r\n      userNavigatedRef.current = true\r\n      nav.goBack()\r\n      // Clear the currentView to show main nodes instead of subnodes\r\n      setExitingView(currentView || \"__main__\")\r\n      setIsTransitioning(true)\r\n      setTimeout(() => {\r\n        setCurrentView(null)\r\n        setExitingView(null)\r\n        setIsTransitioning(false)\r\n        selectCategory(\"\")\r\n        // NOTE: Don't reset userNavigatedRef here - let it stay true until user selects a new node\r\n        // This prevents backend sync from re-selecting the old category before it's cleared\r\n      }, SPIN_CONFIG.spinDuration)\r\n    } else if (level === 2) {\r\n      // Level 2: Main nodes showing -> collapse to level 1 (idle)\r\n      console.log('[Nav System] handleIrisClick: Level 2->1, collapsing to idle')\r\n      userNavigatedRef.current = true\r\n      nav.collapseToIdle()\r\n      setIsExpanded(false)\r\n      // Clear backend category to prevent it from restoring on refresh\r\n      selectCategory(\"\")\r\n    } else {\r\n      // Level 1: Idle -> expand to level 2 (main nodes)\r\n      console.log('[Nav System] handleIrisClick: Level 1->2, expanding')\r\n      userNavigatedRef.current = true\r\n      nav.expandToMain()\r\n      setIsExpanded(true)\r\n    }\r\n  }, [currentView, isExpanded, isTransitioning, activeSubnodeId, selectSubnode, selectCategory, nav])\r\n\r\n  const currentNodes = currentView\r\n    ? SUB_NODES[currentView].map((node, idx) => ({\r\n        ...node,\r\n        angle: (idx * (360 / SUB_NODES[currentView].length)) - 90,\r\n        index: idx,\r\n      }))\r\n    : NODE_POSITIONS.map((n) => ({ ...n, fields: [] as any[] }))\r\n\r\n  const exitingNodes = exitingView\r\n    ? exitingView === \"__main__\"\r\n      ? NODE_POSITIONS.map((n) => ({ ...n, fields: [] as any[] }))\r\n      : SUB_NODES[exitingView].map((node, idx) => ({\r\n          ...node,\r\n          angle: (idx * (360 / SUB_NODES[exitingView].length)) - 90,\r\n          index: idx,\r\n        }))\r\n    : null\r\n\r\n  return (\r\n    <div \r\n      className=\"relative w-full h-full flex items-center justify-center\"\r\n      style={{ \r\n        overflow: 'visible',\r\n        pointerEvents: 'none' // Outer wrapper: click-through to desktop\r\n      }}\r\n    >\r\n      {/* Inner container: No pointer-events-auto here! Only on specific children */}\r\n      <div \r\n        className=\"relative\"\r\n        style={{ width: 800, height: 800 }}\r\n      >\r\n        \r\n        {/* Ambient glow - click-through */}\r\n        <motion.div\r\n          className=\"absolute rounded-full pointer-events-none\"\r\n          style={{\r\n            width: 400,\r\n            height: 400,\r\n            left: \"50%\",\r\n            top: \"50%\",\r\n            marginLeft: -200,\r\n            marginTop: -200,\r\n            background: `radial-gradient(circle, ${glowColor}20 0%, ${glowColor}08 40%, transparent 70%)`,\r\n          }}\r\n          animate={{ scale: [1, 1.2, 1], opacity: [0.5, 0.8, 0.5] }}\r\n          transition={{ duration: 8, repeat: Infinity, ease: \"easeInOut\" }}\r\n        />\r\n\r\n        {/* Confirmed orbiting nodes - INTERACTIVE */}\r\n        <AnimatePresence>\r\n          {confirmedNodes.map(node => (\r\n            <motion.div\r\n              key={node.id}\r\n              className=\"absolute flex items-center justify-center pointer-events-auto\"\r\n              style={{\r\n                width: MINI_NODE_STACK_CONFIG.sizeConfirmed,\r\n                height: MINI_NODE_STACK_CONFIG.sizeConfirmed,\r\n                left: \"50%\",\r\n                top: \"50%\",\r\n                marginLeft: -MINI_NODE_STACK_CONFIG.sizeConfirmed / 2,\r\n                marginTop: -MINI_NODE_STACK_CONFIG.sizeConfirmed / 2,\r\n              }}\r\n              initial={{ scale: 0, opacity: 0 }}\r\n              animate={{\r\n                scale: 1,\r\n                x: Math.cos((node.orbitAngle * Math.PI) / 180) * orbitRadius,\r\n                y: Math.sin((node.orbitAngle * Math.PI) / 180) * orbitRadius,\r\n                opacity: 1,\r\n              }}\r\n              transition={{ type: \"spring\", stiffness: 100, damping: 15 }}\r\n            >\r\n              <div\r\n                className=\"w-full h-full flex flex-col items-center justify-center gap-1 rounded-2xl cursor-pointer\"\r\n                style={{\r\n                  background: \"rgba(255, 255, 255, 0.08)\",\r\n                  backdropFilter: \"blur(12px)\",\r\n                  border: \"1px solid rgba(255, 255, 255, 0.1)\",\r\n                }}\r\n              >\r\n                {React.createElement(ICON_MAP[typeof node.icon === 'string' ? node.icon : 'Mic'] || Mic, {\r\n                  className: \"w-5 h-5\",\r\n                  style: { color: glowColor },\r\n                  strokeWidth: 1.5\r\n                })}\r\n                <span className=\"text-[8px] font-medium tracking-wider text-muted-foreground\">\r\n                  {node.label}\r\n                </span>\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </AnimatePresence>\r\n\r\n        {/* Center IRIS Orb - INTERACTIVE (Drag + Click) */}\r\n        <motion.div\r\n          className=\"absolute left-1/2 top-1/2 flex items-center justify-center pointer-events-none z-10\"\r\n          style={{ \r\n            marginLeft: -(irisSize + 120) / 2,\r\n            marginTop: -(irisSize + 120) / 2,\r\n            width: irisSize + 120,\r\n            height: irisSize + 120,\r\n          }}\r\n          animate={{\r\n            scale: nav.state.level === 4 ? 0.43 : 1,\r\n            x: 0,\r\n          }}\r\n          transition={{ type: \"spring\", stiffness: 200, damping: 20, duration: 0.5 }}\r\n        >\r\n          <div className=\"pointer-events-auto\">\r\n            <IrisOrb\r\n              isExpanded={isExpanded}\r\n              onClick={handleIrisClick}\r\n              centerLabel={centerLabel}\r\n              size={irisSize}\r\n              glowColor={glowColor}\r\n            />\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Connecting line between Iris Orb and Mini Stack - Liquid Metal */}\r\n        <AnimatePresence>\r\n          {nav.state.level === 4 && (\r\n            <motion.div\r\n              className=\"absolute left-1/2 top-1/2 pointer-events-none z-[55]\"\r\n              style={{\r\n                height: 2,\r\n                width: 200,\r\n                marginTop: -1,\r\n                marginLeft: 30,\r\n                background: `linear-gradient(90deg, \r\n                  rgba(255,255,255,0.8) 0%, \r\n                  rgba(192,192,192,0.9) 20%, \r\n                  rgba(255,255,255,0.95) 40%, \r\n                  rgba(192,192,192,0.9) 60%, \r\n                  rgba(255,255,255,0.8) 80%,\r\n                  rgba(128,128,128,0.6) 100%)`,\r\n                boxShadow: '0 0 4px rgba(255,255,255,0.5)',\r\n              }}\r\n              initial={{ opacity: 0, scaleX: 0 }}\r\n              animate={{ opacity: 1, scaleX: 1 }}\r\n              exit={{ opacity: 0, scaleX: 0 }}\r\n              transition={{ duration: 0.4 }}\r\n            />\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* Mini Node Stack - Level 4 - COMPLETELY ISOLATED with higher z-index */}\r\n        <AnimatePresence>\r\n          {nav.state.level === 4 && nav.state.miniNodeStack.length > 0 && (\r\n            <motion.div\r\n              className=\"absolute left-1/2 top-1/2 pointer-events-auto z-[200]\"\r\n              style={{ \r\n                marginLeft: 280,\r\n                marginTop: -160,\r\n                width: 240,\r\n                height: 420,\r\n              }}\r\n              initial={{ opacity: 0, scale: 0.8, x: -20 }}\r\n              animate={{ opacity: 1, scale: 1, x: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8, x: -20 }}\r\n              transition={{ duration: 0.4 }}\r\n            >\r\n              <MiniNodeStack miniNodes={nav.state.miniNodeStack} />\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* Exiting nodes */}\r\n        <AnimatePresence>\r\n          {(nav.state.level === 2 || nav.state.level === 3) && exitingNodes && (\r\n            <>\r\n              {exitingNodes.map((node, idx) => (\r\n                <PrismNode\r\n                  key={`exit-${node.id}`}\r\n                  node={node}\r\n                  angle={node.angle}\r\n                  radius={exitingView ? subRadius : mainRadius}\r\n                  nodeSize={nodeSize}\r\n                  onClick={() => {}}\r\n                  spinRotations={exitingView ? SUBMENU_CONFIG.rotations : SPIN_CONFIG.rotations}\r\n                  spinDuration={exitingView ? SUBMENU_CONFIG.spinDuration : SPIN_CONFIG.spinDuration}\r\n                  staggerIndex={idx}\r\n                  isCollapsing={true}\r\n                  isActive={false}\r\n                  spinConfig={SPIN_CONFIG}\r\n                />\r\n              ))}\r\n            </>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* Current nodes - INTERACTIVE - Hidden when mini-node stack is showing (Level 4) */}\r\n        <AnimatePresence>\r\n          {(nav.state.level === 2 || nav.state.level === 3) && (\r\n            <>\r\n              {currentNodes\r\n                .filter(node => !activeSubnodeId || node.id !== activeSubnodeId)\r\n                .map((node, idx) => (\r\n                <PrismNode\r\n                  key={node.id}\r\n                  node={node}\r\n                  angle={node.angle}\r\n                  radius={currentView ? subRadius : mainRadius}\r\n                  nodeSize={nodeSize}\r\n                  onClick={(e) => {\r\n                    // Track click timestamp to prevent iris orb toggle\r\n                    nodeClickTimestampRef.current = Date.now()\r\n                    // Stop event from bubbling to iris orb handler\r\n                    e?.stopPropagation()\r\n                    currentView\r\n                      ? handleSubnodeClick(node.id)\r\n                      : handleNodeClick(node.id, node.label, (node as any).hasSubnodes)\r\n                  }}\r\n                  spinRotations={currentView ? SUBMENU_CONFIG.rotations : SPIN_CONFIG.rotations}\r\n                  spinDuration={currentView ? SUBMENU_CONFIG.spinDuration : SPIN_CONFIG.spinDuration}\r\n                  staggerIndex={idx}\r\n                  isCollapsing={false}\r\n                  isActive={activeSubnodeId === node.id}\r\n                  spinConfig={SPIN_CONFIG}\r\n                />\r\n              ))}\r\n            </>\r\n          )}\r\n        </AnimatePresence>\r\n        <AnimatePresence>\r\n          {nav.state.level === 1 && (\r\n            <motion.div\r\n              className=\"absolute bottom-40 left-1/2 -translate-x-1/2 pointer-events-none\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: 10 }}\r\n              transition={{ delay: 0.5, duration: 0.4 }}\r\n            >\r\n              <motion.span\r\n                className=\"text-xs text-muted-foreground/60 tracking-widest uppercase\"\r\n                animate={{ opacity: [0.4, 0.8, 0.4] }}\r\n                transition={{ duration: 3, repeat: Infinity, ease: \"easeInOut\" }}\r\n              >\r\n                TAP IRIS TO EXPAND\r\n              </motion.span>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}}]
}